<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>目录 | LiZhou 学习笔记</title><meta name="description" content="LiZhou Study Notes">
    <link rel="stylesheet" href="/study-notes/assets/css/styles.eff80740.css">
    <link rel="preload" href="/study-notes/assets/js/runtime~app.f0efdb6e.js" as="script"><link rel="preload" href="/study-notes/assets/css/styles.eff80740.css" as="style"><link rel="preload" href="/study-notes/assets/js/6036.7d799e3b.js" as="script"><link rel="preload" href="/study-notes/assets/js/app.c05956ee.js" as="script">
    <link rel="prefetch" href="/study-notes/assets/js/Base_01_Math.html.c721fa92.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_03_永磁10讲.html.0f463a9b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_01_Base.html.d4e3bf14.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_020_weidongshan.html.59ce0b49.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ST.html.e4c2fe44.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Career.html.76fd4459.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_10_FOC.html.e993af54.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_021_Algorithms.html.0eab52ca.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Robot.html.20b6ebdd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Protocol.html.be74ffaf.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_011_FreeRTOS.html.2c4f7466.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Electronics.html.a6bb75a2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_013_Linux.html.256c81fa.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ESPRESSIF.html.f56f20f2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Car.html.1445925c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_PCB.html.1e521b7e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Tool.html.bc99efb6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Circuit.html.29cff5f8.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_AI.html.bc600b38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_010_VersionControlSystem.html.aedcc3b1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_01_Design.html.718a1783.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_004_Matlab.html.458205d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_00_Motor.html.13c6e4dd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_03_mechanics.html.6ae4e01e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_51.html.c5bc6ef9.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_02_CAX.html.1927dfe1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_IOT.html.2eccc1d6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_SLAM.html.93745467.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Log.html.25f91089.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_11_TIMER.html.4eb05f50.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_04_TOOL.html.c052c425.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Video.html.c905d2ed.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Raspberry Pi.html.7fefb830.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_009_DevTool.html.1ad809b4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_012_RT-Thread.html.9991ddbe.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Audio.html.fad407ae.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_06_Electronics.html.3b938fe5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Storage.html.1fcdef3f.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_001_OS.html.ebd9a416.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_02_Physics.html.e5bbda38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_03_DDC.html.fdb945eb.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_ElectricalEnergy.html.5fe5928a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_TechnologyCollection.html.a0849c1c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Arduino.html.d0840f6e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_001_C.html.b591a2d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_IC.html.3a3ff3f5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Canaan.html.22ca4853.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_022_DesignMode.html.6a297ee4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/get-started.html.4895b3af.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Database.html.e3e355d4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_20_MC_FOC.html.3a828c2b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Board.html.dc51ff11.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_002_Python.html.d5a21fd2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_index.html.472a6d77.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Secure.html.de1ee739.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_020_ComputerSystem.html.094362f1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_other.html.ecd4d1d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_003_Rust.html.7d7d6d17.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/index.html.dc8bcb04.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Armarium.html.edcc7208.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Infineon.html.40e7fec6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_index.html.87ac7181.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_index.html.0995e034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Virtual.html.f7474034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_014_openharmory.html.8eed78cd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Consumption.html.caeeff5d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_OTA.html.3d12318a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_30_HW.html.25d871be.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_04_Control.html.05fa9682.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/404.html.b06b23c6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/study-notes/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="LiZhou 学习笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">LiZhou 学习笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Embeded <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Code <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/001_C.html" aria-label="视觉设计"><!--[--><!--[--><!--]--><!--]-->视觉设计<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/002_Python.html" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/003_Rust.html" aria-label="Rust"><!--[--><!--[--><!--]--><!--]-->Rust<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/004_Matlab.html" aria-label="Matlab"><!--[--><!--[--><!--]--><!--]-->Matlab<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/009_DevTool.html" aria-label="开发工具"><!--[--><!--[--><!--]--><!--]-->开发工具<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/010_VersionControlSystem.html" aria-label="版本管理"><!--[--><!--[--><!--]--><!--]-->版本管理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/020_ComputerSystem.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/021_Algorithms.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/022_DesignMode.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Motor <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/00_Motor.html" aria-label="电机教程"><!--[--><!--[--><!--]--><!--]-->电机教程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/01_Base.html" aria-label="电磁基础"><!--[--><!--[--><!--]--><!--]-->电磁基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/03_%E6%B0%B8%E7%A3%8110%E8%AE%B2.html" aria-label="永磁10讲"><!--[--><!--[--><!--]--><!--]-->永磁10讲<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/10_FOC.html" aria-label="FOC"><!--[--><!--[--><!--]--><!--]-->FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/11_TIMER.html" aria-label="定时器"><!--[--><!--[--><!--]--><!--]-->定时器<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/20_MC_FOC.html" aria-label="MC_FOC"><!--[--><!--[--><!--]--><!--]-->MC_FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/30_HW.html" aria-label="电机硬件"><!--[--><!--[--><!--]--><!--]-->电机硬件<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h1><ul><li><a href="#%E7%9B%AE%E5%BD%95">目录</a><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li></ul></li><li><a href="#%E6%A6%82%E8%BF%B0">概述</a><ul><li><a href="#osi%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B">OSI七层模型</a><ul><li><a href="#osi%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%8E%9F%E5%88%99">OSI的基本概念及原则</a></li><li><a href="#osi%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D">OSI七层模型功能介绍</a></li></ul></li></ul></li><li><a href="#%E4%B8%8A%E5%B1%82%E5%8D%8F%E8%AE%AE">上层协议</a><ul><li><a href="#at">AT</a></li><li><a href="#tlv">TLV</a></li><li><a href="#modbus">Modbus</a><ul><li><a href="#%E7%AE%80%E4%BB%8B-1">简介</a></li><li><a href="#modbus%E5%AD%98%E5%82%A8%E5%8C%BA">Modbus存储区</a></li><li><a href="#modbus%E5%8D%8F%E8%AE%AE%E7%B1%BB%E5%9E%8B">Modbus协议类型</a></li><li><a href="#modbus%E5%8A%9F%E8%83%BD%E7%A0%81">Modbus功能码</a></li><li><a href="#modbus%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F">Modbus报文格式</a></li><li><a href="#modbus%E8%AF%BB%E5%86%99%E8%BF%87%E7%A8%8B">Modbus读写过程</a></li><li><a href="#modbus%E5%8D%8F%E8%AE%AE%E5%BC%80%E5%8F%91">Modbus协议开发</a></li></ul></li></ul></li><li><a href="#%E7%89%A9%E7%90%86%E5%B1%82%E5%8D%8F%E8%AE%AE">物理层协议</a><ul><li><a href="#%E9%80%9A%E8%AE%AF%E5%88%86%E7%B1%BB">通讯分类</a></li><li><a href="#uart">UART</a><ul><li><a href="#%E7%AE%80%E4%BB%8B-2">简介</a></li><li><a href="#%E7%89%A9%E7%90%86%E7%89%B9%E6%80%A7">物理特性</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%B8%A7%E6%A0%BC%E5%BC%8F">数据帧格式</a></li><li><a href="#%E6%8E%A5%E6%94%B6%E6%A8%A1%E5%BC%8F">接收模式</a></li><li><a href="#%E5%8F%91%E9%80%81%E6%A8%A1%E5%BC%8F">发送模式</a></li></ul></li><li><a href="#i2c">I2C</a><ul><li><a href="#%E7%AE%80%E4%BB%8B-3">简介</a></li><li><a href="#%E7%89%A9%E7%90%86%E7%89%B9%E6%80%A7-1">物理特性</a></li><li><a href="#%E9%80%9A%E8%AE%AF%E7%89%B9%E6%80%A7">通讯特性</a></li></ul></li><li><a href="#spi">SPI</a><ul><li><a href="#%E7%AE%80%E4%BB%8B-4">简介</a></li><li><a href="#%E7%89%A9%E7%90%86%E7%89%B9%E6%80%A7-2">物理特性</a></li><li><a href="#%E9%80%9A%E8%AE%AF%E7%89%B9%E6%80%A7-1">通讯特性</a></li></ul></li><li><a href="#usb">USB</a></li><li><a href="#rs485rs232rs422">RS485/RS232/RS422</a><ul><li><a href="#%E7%AE%80%E4%BB%8B-5">简介</a></li><li><a href="#%E7%89%B9%E6%80%A7%E5%8F%8A%E5%8C%BA%E5%88%AB">特性及区别</a></li><li><a href="#%E7%AE%80%E4%BB%8B-6">简介</a></li><li><a href="#%E7%89%A9%E7%90%86%E7%89%B9%E6%80%A7-3">物理特性</a></li></ul></li><li><a href="#rs232">RS232</a></li><li><a href="#lin">LIN</a></li><li><a href="#can">CAN</a><ul><li><a href="#can-fd">CAN-FD</a></li><li><a href="#%E4%B8%8A%E5%B1%82%E5%8D%8F%E8%AE%AE-1">上层协议</a><ul><li><a href="#canopen">CANopen</a><ul><li><a href="#%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%E6%A0%88">开源协议栈</a></li></ul></li></ul></li><li><a href="#%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99">学习资料</a></li><li><a href="#%E5%85%B6%E4%BB%96%E6%9C%AA%E6%95%B4%E7%90%86">其他未整理</a><ul><li><a href="#can%E9%80%9A%E8%AE%AF%E5%AD%A6%E4%B9%A0">CAN通讯学习</a></li><li><a href="#%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%B2%E8%A7%A3can%E6%80%BB%E7%BA%BF">深入浅出讲解CAN总线</a></li><li><a href="#canopen%E5%AD%A6%E4%B9%A0">CANopen学习</a><ul><li><a href="#nmt%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86">NMT网络管理</a></li><li><a href="#canopen%E4%B8%BB%E7%AB%99%E8%AE%BE%E5%A4%87">CANopen主站设备</a></li><li><a href="#%E8%BF%87%E7%A8%8B%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1pdoprocess-data-object">过程数据对象PDO（Process data object）</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1-sdoservice-data-object">服务数据对象 SDO（Service data object）</a></li><li><a href="#%E7%89%B9%E6%AE%8A%E5%8D%8F%E8%AE%AEspecial-protocols">特殊协议（Special protocols）</a></li></ul></li><li><a href="#can%E6%94%B6%E5%8F%91%E5%99%A8%E9%80%89%E5%9E%8B">CAN收发器选型</a></li></ul></li><li><a href="#can%E8%AE%BE%E5%A4%87%E5%8F%8A%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E5%95%86">CAN设备及服务提供商</a></li></ul></li></ul></li><li><a href="#%E8%BF%91%E5%9C%BA">近场</a><ul><li><a href="#wifi">WIFI</a></li><li><a href="#ble">BLE</a></li><li><a href="#nfc">NFC</a></li><li><a href="#uwb">UWB</a></li><li><a href="#zigbee">ZigBee</a></li></ul></li><li><a href="#iot">IOT</a><ul><li><a href="#4g5g">4G/5G</a></li><li><a href="#nb-iot">NB-IOT</a></li><li><a href="#lora">Lora</a></li><li><a href="#eth">ETH</a></li><li><a href="#%E7%94%B5%E5%8A%9B%E7%94%B5%E5%AD%90">电力电子</a></li></ul></li><li><a href="#%E5%85%B6%E4%BB%96">其他</a><ul><li><a href="#%E4%BC%A0%E6%84%9F%E5%99%A8">传感器</a></li><li><a href="#%E7%BA%A2%E5%A4%96%E7%BA%BF">红外线</a></li><li><a href="#%E9%9F%B3%E9%A2%91">音频</a></li><li><a href="#%E5%AD%98%E5%82%A8">存储</a></li><li><a href="#%E8%88%AA%E6%A8%A1">航模</a></li></ul></li><li><a href="#%E5%BE%85%E6%95%B4%E7%90%86">待整理</a></li></ul><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>本文主要介绍 https://www.bilibili.com/video/BV1SK4y1X7jp/</p><h1 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h1><h2 id="osi七层模型" tabindex="-1"><a class="header-anchor" href="#osi七层模型"><span>OSI七层模型</span></a></h2><h3 id="osi的基本概念及原则" tabindex="-1"><a class="header-anchor" href="#osi的基本概念及原则"><span>OSI的基本概念及原则</span></a></h3><p>OSI是Open System Interconnect的缩写，意为开放式系统互联。其各个层次的划分遵循下列原则：</p><ol><li>同一层中的各网络节点都有相同的层次结构，具有同样的功能。</li><li>同一节点内相邻层之间通过接口进行通信。</li><li>七层结构中的每一层使用下一层提供的服务，并且向其上层提供服务。</li><li>不同节点的同等层按照协议实现对等层之间的通信。</li></ol><h3 id="osi七层模型功能介绍" tabindex="-1"><a class="header-anchor" href="#osi七层模型功能介绍"><span>OSI七层模型功能介绍</span></a></h3><table><thead><tr><th style="text-align:center;">OSI七层网络模型</th><th style="text-align:center;">TCP/IP四层概念模型</th><th style="text-align:left;">对应网络协议</th></tr></thead><tbody><tr><td style="text-align:center;">应用层<br>(Application)</td><td style="text-align:center;">应用层</td><td style="text-align:left;">HTTP、TFTP、FTP、NFS、WAIS、SMTP</td></tr><tr><td style="text-align:center;">表示层<br>(Presentation)</td><td style="text-align:center;">应用层</td><td style="text-align:left;">Telnet、Rlogin、SNMP、Gopher</td></tr><tr><td style="text-align:center;">会话层<br>(Session)</td><td style="text-align:center;">应用层</td><td style="text-align:left;">SMTP、DNS <br> 会话层是OSI模型的第5层，是用户应用程序和网络之间的接口，该层的主要功能是：组织和协调两个会话进程之间的通信 ，并对数据交换进行管理。当建立会话时，用户必须提供他们想要连接的远程地址。而这些地址与MAC地址或网络层的逻辑地址不同，它们是为用户专门设计的，更便于用户记忆。域名就是一种网络上使用的远程地址。会话层的具体功能如下：</td></tr><tr><td style="text-align:center;">传输层<br>(Transport)</td><td style="text-align:center;">传输层</td><td style="text-align:left;">TCP、UDP<br> OSI下3层的任务是数据通信，上3层的任务是数据处理。而传输层（Transport Layer）是OSI模型的第4层。该层提供建立、维护和拆除传输连接的功能，起到承上启下的作用。该层的主要功能是：向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输，同时向高层屏蔽下层数据通信的细节，即向用户透明地传送报文。<br></td></tr><tr><td style="text-align:center;">网络层<br>(Network)</td><td style="text-align:center;">网络层</td><td style="text-align:left;">IP、ICMP、ARP、RARP、AKP、UUCP<br>网络层（Network Layer）是OSI模型的第三层，它是OSI参考模型中最复杂的一层，也是通信子网的最高一层，它在下两层的基础上向资源子网提供服务。其主要功能是：在数据链路层提供的两个相邻端点之间的数据帧的传送功能上，进一步管理网络中的数据通信，控制数据链路层与传输层之间的信息转发，建立、维持和终止网络的连接，将数据设法从源端经过若干个中间节点传送到目的端（点到点），从而向传输层提供最基本的端到端的数据传输服务。具体地说，数据链路层的数据在这一层被转换为数据包，然后通过路径选择、分段组合、顺序、进/出路由等控制，将信息从一个网络设备传送到另一个网络设备。数据链路层和网络层的区别为：数据链路层的目的是解决同一网络内节点之间的通信，而网络层主要解决不同子网间的通信。<br></td></tr><tr><td style="text-align:center;">数据链路层<br>(Data Link)</td><td style="text-align:center;">数据链路层</td><td style="text-align:left;">FDDI、Ethernet、Arpanet、PDN、SLIP、PPP<br> 数据链路层（Data Link Layer）是OSI模型的第二层，负责建立和管理节点间的链路。在计算机网络中由于各种干扰的存在，导致物理链路是不可靠的。因此这一层的主要功能是：在物理层提供的比特流的基础上，通过差错控制、流量控制方法，使有差错的物理线路变为无差错的数据链路，即提供可靠的通过物理介质传输数据的方法。<br></td></tr><tr><td style="text-align:center;">物理层<br>(Physical)</td><td style="text-align:center;">数据链路层</td><td style="text-align:left;">IEEE 802.1A、IEEE 802.2到IEEE 802.11<br>在OSI参考模型中，物理层是参考模型的最低层，也是OSI模型的第一层。物理层的主要功能是：利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。物理层的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异，使其上面的数据链路层不必考虑网络的具体传输介质是什么。<br></td></tr></tbody></table><h1 id="上层协议" tabindex="-1"><a class="header-anchor" href="#上层协议"><span>上层协议</span></a></h1><h2 id="at" tabindex="-1"><a class="header-anchor" href="#at"><span>AT</span></a></h2><p><a href="https://blog.csdn.net/liming0931/article/details/102966539" target="_blank" rel="noopener noreferrer">GSM/GPRS模块 AT指令集C语言编程——基于有方M660+和MSP430单片机</a></p><p><a href="https://blog.csdn.net/m0_64445185/article/details/126794216" target="_blank" rel="noopener noreferrer">stm32f4WiFi模块代码调试过程</a></p><p><a href="https://download.csdn.net/download/hnxyxiaomeng/10815656" target="_blank" rel="noopener noreferrer">基于C语言的AT指令代码实现</a></p><p><a href="https://blog.csdn.net/hnxyxiaomeng/article/details/84613712" target="_blank" rel="noopener noreferrer">AT指令代码与实现方法（基于C语言）</a></p><p><a href="https://blog.csdn.net/weixin_39949413/article/details/112127788" target="_blank" rel="noopener noreferrer">at指令代码 stm32f030_AT命令简介</a></p><p><a href="https://blog.csdn.net/wuhenyouyuyouyu/article/details/83010935" target="_blank" rel="noopener noreferrer">AT指令的一种解析想法</a></p><p><a href="https://liefyuan.blog.csdn.net/article/details/80428059" target="_blank" rel="noopener noreferrer">STM32--ESP8266--AT指令使用例程</a></p><p><a href="https://download.csdn.net/download/ylc0919/13606978?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-download-2%7Edefault%7ECTRLIST%7EPaid-1-13606978-blog-111478925.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-download-2%7Edefault%7ECTRLIST%7EPaid-1-13606978-blog-111478925.pc_relevant_aa&amp;utm_relevant_index=1" target="_blank" rel="noopener noreferrer">(128条消息) c语言-自用的通用AT框架（修改了一些错误）_at命令框架,at框架-嵌入式文档类资源-CSDN文库</a></p><h2 id="tlv" tabindex="-1"><a class="header-anchor" href="#tlv"><span>TLV</span></a></h2><h2 id="modbus" tabindex="-1"><a class="header-anchor" href="#modbus"><span>Modbus</span></a></h2><h3 id="简介-1" tabindex="-1"><a class="header-anchor" href="#简介-1"><span>简介</span></a></h3><p>Modbus协议是一种应用层协议，最初是Modicon公司在1979年为其PLC产品开发的。它是一种开放的、基于主从结构的通信协议，广泛应用于工业自动化和控制系统中。Modbus协议定义了数据传输的格式和规则，使得不同厂商的设备能够互相通信。</p><p>协议本身并没有定义物理层，定义了控制器能够认识和使用的消息结构，不管它们是经过何种网络进行通信的。 所以能够适应多种电气接口，因此使用非常广泛。</p><table><thead><tr><th>特点</th><th>说明</th></tr></thead><tbody><tr><td>一主多从</td><td>主机在同一时间内只能向一个从机发送请求，总线上每次只有一个数据进行传输,即主机发送,从机应答，主机不发送,总线上就没有数据通信。<br>从机地址:：每个从机都有唯一地址，占用一个字节,范围0-255，其中有效范围是1-247，其中255是广播地址(广播就是对所有从机发送应答)。</td></tr><tr><td>无忙机制判断</td><td>比方说主机给从机发送命令， 从机没有收到或者正在处理其他东西，这时候就不能响应主机，因为modbus的总线只是传输数据，没有其他仲裁机制，所以需要通过软件的方式来判断是否正常接收。<br>主机发送数据，首先需要从机的电话号码(区分每个从机，每个地址必须唯一)，告诉从机打电话要干什么事情，然后是需要发送的内容，最后再问问从机，我说的话你都听清楚了没有呀，没有听错吧？<br> 然后从机这里，得到了主机打过来的电话，从机回复主机需要的内容，主机得到从机数据，这样就是一个主机到从机的通信过程。</td></tr></tbody></table><h3 id="modbus存储区" tabindex="-1"><a class="header-anchor" href="#modbus存储区"><span>Modbus存储区</span></a></h3><p>存储区是Modbus协议的核心概念之一，它定义了从机存储数据的方式和结构。Modbus协议将从机的存储空间划分为不同的存储区，每个存储区有不同的读写权限和数据类型。这些存储区用于存储从机的状态、配置参数和传感器数据等信息。</p><p>存储区的数据类型可以分为：</p><ul><li>布尔量（Boolean）：表示开关状态或数字的高低电平，比如IO口的电平高低、灯的开关状态等。</li><li>16位寄存器（16-bit Register）：用于存储整数或其他数值数据，比如传感器的温度数据、存储的密码等。</li></ul><p>Modbus协议规定了四个存储区，分别是0区、1区、3区和4区。其中0区和4区是可读可写的，1区和3区是只读的。</p><table><thead><tr><th>区号</th><th>名称</th><th>读写</th><th>地址范围</th></tr></thead><tbody><tr><td>0区</td><td>输出线圈</td><td>可读可写布尔量</td><td>00001-09999</td></tr><tr><td>1区</td><td>输入线圈</td><td>只读布尔量</td><td>10001-19999</td></tr><tr><td>3区</td><td>输入寄存器</td><td>只读寄存器</td><td>30001-39999</td></tr><tr><td>4区</td><td>保持寄存器</td><td>可读可写寄存器</td><td>40001-49999</td></tr></tbody></table><h3 id="modbus协议类型" tabindex="-1"><a class="header-anchor" href="#modbus协议类型"><span>Modbus协议类型</span></a></h3><p>Modbus可以在各种物理层介质上传输，它的传输模式也分为三种，包括RTU(远程终端控制系统)、ASCII、TCP三种报文类型，区别如下：</p><table><thead><tr><th style="text-align:center;">传输类型</th><th style="text-align:center;">Modbus RTU</th><th style="text-align:center;">Modbus ASCII</th><th style="text-align:center;">Modbus TCP</th></tr></thead><tbody><tr><td style="text-align:center;">数据格式</td><td style="text-align:center;">二进制</td><td style="text-align:center;">ASCII</td><td style="text-align:center;">二进制</td></tr><tr><td style="text-align:center;">数据长度</td><td style="text-align:center;">8位</td><td style="text-align:center;">7位</td><td style="text-align:center;">8位</td></tr><tr><td style="text-align:center;">校验方式</td><td style="text-align:center;">CRC(循环冗余校验和校验)</td><td style="text-align:center;">LRC(纵向冗余和校验)</td><td style="text-align:center;">无(TCP可靠)</td></tr><tr><td style="text-align:center;">传输速率</td><td style="text-align:center;">较高</td><td style="text-align:center;">较低</td><td style="text-align:center;">较高</td></tr><tr><td style="text-align:center;">传输介质</td><td style="text-align:center;">串口</td><td style="text-align:center;">串口</td><td style="text-align:center;">TCP/IP</td></tr><tr><td style="text-align:center;">使用频率</td><td style="text-align:center;">较高</td><td style="text-align:center;">较低</td><td style="text-align:center;">较高</td></tr><tr><td style="text-align:center;">适用场景</td><td style="text-align:center;">工业自动化、PLC等</td><td style="text-align:center;">低速设备、简单通信</td><td style="text-align:center;">网络通信、远程监控</td></tr></tbody></table><blockquote><p>Modbus RTU是一种紧凑的，十六进制表示数据的方式，Modbus ASCII是一种采用Ascii码表示数据，并且每个8Bit 字节都作为两个ASCII字符发送的表示方式。</p><p>如果我们需要发送一个数字10 那么RTU模式下，只需要发送 0x0A 总线上传输数据形式为： 0000 1010</p><p>而ASCII码模式则将数据1和0转为’1’和’0’,需要发送0x31(1) 0x30(0)两个字节数据。总线上传输数据形式为： 0011 0001 0011 0000</p></blockquote><h3 id="modbus功能码" tabindex="-1"><a class="header-anchor" href="#modbus功能码"><span>Modbus功能码</span></a></h3><p>功能码是Modbus协议中用于标识不同功能的代码。Modbus协议定义了多个功能码，每个功能码对应一个特定的操作或请求。功能码的使用使得Modbus协议能够支持多种不同的操作，如读取数据、写入数据等。</p><p>Modbus协议同时规定了二十几种功能码，但是常用的只有8种，用于对存储区的读写，如下表所示：</p><table><thead><tr><th>功能码</th><th>功能说明</th></tr></thead><tbody><tr><td>01H</td><td>读取输出线圈</td></tr><tr><td>02H</td><td>读取输入线圈</td></tr><tr><td>03H</td><td>读取保持寄存器</td></tr><tr><td>04H</td><td>读取输入寄存器</td></tr><tr><td>05H</td><td>写入单线圈</td></tr><tr><td>06H</td><td>写入单寄存器</td></tr><tr><td>0FH</td><td>写入多线圈</td></tr><tr><td>10H</td><td>写入多寄存器</td></tr></tbody></table><h3 id="modbus报文格式" tabindex="-1"><a class="header-anchor" href="#modbus报文格式"><span>Modbus报文格式</span></a></h3><p>Modbus协议的报文格式根据不同的传输类型有所不同。以下是Modbus RTU、Modbus ASCII和Modbus TCP的报文格式。</p><p>Modbus RTU报文格式如下：</p><table><thead><tr><th>从站地址</th><th>功能码</th><th>数据（可变）</th><th>CRC校验</th></tr></thead><tbody><tr><td>0x01</td><td>0x03</td><td>0x00 0x01 0x00 0x01</td><td>0xD5 0xCA</td></tr></tbody></table><p>Modbus ASCII帧结构如下：</p><table><thead><tr><th>起始符</th><th>从站地址</th><th>功能码</th><th>数据（可变）</th><th>LRC校验</th><th>结束符</th></tr></thead><tbody><tr><td>0x3A</td><td>0x01</td><td>0x03</td><td>0x00 0x01 0x00 0x01</td><td>0xD5 0xCA</td><td>0x0D 0x0A</td></tr></tbody></table><p>Modbus TCP帧结构如下：</p><table><thead><tr><th>事务ID</th><th>协议ID</th><th>长度</th><th>单元ID</th><th>功能码</th><th>数据（可变）</th></tr></thead><tbody><tr><td>0x0001</td><td>0x0000</td><td>0x0006</td><td>0x01</td><td>0x03</td><td>0x00 0x01 0x00 0x01</td></tr></tbody></table><h3 id="modbus读写过程" tabindex="-1"><a class="header-anchor" href="#modbus读写过程"><span>Modbus读写过程</span></a></h3><p><strong>1. 主机对从机读数据操作</strong></p><p>主机发送报文格式如下：</p><table><thead><tr><th>从站地址</th><th>功能码</th><th>起始（高）</th><th>起始（低）</th><th>数量（高）</th><th>数量（低）</th><th>校验</th></tr></thead><tbody><tr><td>0x01</td><td>0x03</td><td>0x00</td><td>0x01</td><td>0x00</td><td>0x01</td><td>0xD5 0xCA</td></tr></tbody></table><ul><li>0x01：从机的地址</li><li>0x03：查询功能，读取从机寄存器的数据</li><li>0x00 0x01： 代表读取的起始寄存器地址.说明从0x0001开始读取.</li><li>0x00 0x01： 查询的寄存器数量为0x0001个 Modbus把数据存放在寄存器中,通过查询寄存器来得到不同变量的值,一个寄存器地址对应2字节数据; 寄存器地址对应着从机实际的存储地址</li><li>0xD5 0xCA： 循环冗余校验 CRC</li></ul><p>从机回复报文格式如下：</p><table><thead><tr><th>从站地址</th><th>功能码</th><th>字节计数</th><th>字节1</th><th>字节2</th><th>校验</th></tr></thead><tbody><tr><td>0x01</td><td>0x03</td><td>0x02</td><td>0x00</td><td>0x17</td><td>0xF8 0x4A</td></tr></tbody></table><ul><li>0x01：从机的地址</li><li>0x03：查询功能，读取从机寄存器的数据</li><li>0x02： 返回字节数为2个 一个寄存器2个字节</li><li>0x00 0x17：寄存器的值是0017</li><li>0xF8 0x4A： 循环冗余校验 CRC</li></ul><p><strong>2.主机对从机写数据操作</strong></p><p>主机发送报文格式如下：</p><table><thead><tr><th>从站地址</th><th>功能码</th><th>数据地址（高）</th><th>数据地址（低）</th><th>数据（高）</th><th>数据（低）</th><th>校验</th></tr></thead><tbody><tr><td>0x01</td><td>0x06</td><td>0x00</td><td>0x01</td><td>0x00</td><td>0x17</td><td>0x98 0x04</td></tr></tbody></table><ul><li>0x01：从机的地址</li><li>0x06：修改功能，修改从机寄存器的数据</li><li>0x00 0x01： 代表修改的起始寄存器地址.说明修改0x0000-0x0001的存储内容</li><li>0x00 0x17： 要修改的数据值为0017</li><li>0x98 0x04： 循环冗余校验 CRC</li></ul><p>从机回复报文格式如下：</p><table><thead><tr><th>从站地址</th><th>功能码</th><th>数据地址（高）</th><th>数据地址（低）</th><th>数据（高）</th><th>数据（低）</th><th>校验</th></tr></thead><tbody><tr><td>0x01</td><td>0x06</td><td>0x00</td><td>0x01</td><td>0x00</td><td>0x17</td><td>0x98 0x04</td></tr></tbody></table><ul><li>0x01：从机的地址</li><li>0x06：修改功能，修改从机寄存器的数据</li><li>0x00 0x01： 代表修改的起始寄存器地址.说明是0x0000</li><li>0x00 0x17：修改的值为0017</li><li>0x98 0x04： 循环冗余校验 CRC</li></ul><blockquote><p><strong>从机的回复和主机的发送是一样的，如果不一样说明出现了错误</strong></p></blockquote><h3 id="modbus协议开发" tabindex="-1"><a class="header-anchor" href="#modbus协议开发"><span>Modbus协议开发</span></a></h3><p><strong>调试工具</strong></p><p>modbus slave：一个Modbus从机模拟器，可以模拟Modbus从机的行为，方便开发和调试Modbus主机程序。它支持Modbus RTU、ASCII和TCP协议，并提供了图形化界面，便于用户进行配置和操作。 modbus poll：一个Modbus主机模拟器，可以模拟Modbus主机的行为，方便开发和调试Modbus从机程序。它支持Modbus RTU、ASCII和TCP协议，并提供了图形化界面，便于用户进行配置和操作。</p><p><strong>开发框架</strong></p><p>freemodbus：一个开源的Modbus协议栈，支持Modbus RTU、ASCII和TCP协议。它提供了丰富的API接口，方便用户进行Modbus协议的开发和调试。freemodbus可以在多种操作系统上运行，包括Linux、Windows和RT-Thread等嵌入式操作系统。</p><p><strong>参考资料</strong></p><p><a href="https://github.com/RT-Thread-packages/freemodbus/blob/master/README_ZH.md" target="_blank" rel="noopener noreferrer">RT-Thread官方移植freemodbus</a></p><p><a href="https://www.embedded-experts.at/en/freemodbus/about/" target="_blank" rel="noopener noreferrer">FreeModbus官网</a></p><p><a href="https://blog.csdn.net/as480133937/article/details/123197782" target="_blank" rel="noopener noreferrer">详解Modbus通信协议---清晰易懂-CSDN博客</a></p><h1 id="物理层协议" tabindex="-1"><a class="header-anchor" href="#物理层协议"><span>物理层协议</span></a></h1><h2 id="通讯分类" tabindex="-1"><a class="header-anchor" href="#通讯分类"><span>通讯分类</span></a></h2><table><thead><tr><th>通信方式</th><th>工作方式/定义</th><th>优点</th><th>缺点</th><th>典型应用/例子</th></tr></thead><tbody><tr><td>串行通信</td><td>数据位按顺序依次传输，每一位数据依次发送或接收</td><td>结构简单，布线简单，不易数据冲突</td><td>速度较慢，不适合大量数据快速传输</td><td>USB，UART，光纤通信</td></tr><tr><td>并行通信</td><td>多个数据位同时传输，每个位有独立通道</td><td>速度快，适合大量数据快速传输</td><td>复杂度高，占用引脚多，易同步问题</td><td>短距离传输，长距离成本高</td></tr><tr><td>同步通信</td><td>发送和接收依赖共享时钟信号，时钟同步</td><td>时序清晰，易管理，适合实时和精确同步</td><td>高频时钟衰减快，易信号畸变，相位偏移，距离受限</td><td>I2C，HDMI，CPU与内存接口</td></tr><tr><td>异步通信</td><td>不依赖共享时钟，靠起始位和停止位标识数据块</td><td>灵活，无需精确时钟，媒介简单，距离长</td><td>高速/长距离时易失真，解码复杂，可靠性降低</td><td>UART，USB1.1/2.0，光纤通信</td></tr><tr><td>单工通信</td><td>单向通信，一个设备发送，另一个接收</td><td>结构简单</td><td>只能单向传输</td><td>无线电广播、电视广播</td></tr><tr><td>半双工通信</td><td>双向但不能同时传输，需切换方向</td><td>双向传输</td><td>不能同时收发，需切换</td><td>对讲机、传统无线电通信</td></tr><tr><td>全双工通信</td><td>双向且可同时传输，双方可同时发送和接收</td><td>可同时收发，实现真正双向通信</td><td>结构相对复杂</td><td>电话通话、互联网语音、计算机网络通</td></tr></tbody></table><h2 id="uart" tabindex="-1"><a class="header-anchor" href="#uart"><span>UART</span></a></h2><h3 id="简介-2" tabindex="-1"><a class="header-anchor" href="#简介-2"><span>简介</span></a></h3><p>UART是通用异步收发传输器（Universal Asynchronous Receiver/Transmitter）的缩写，是一种串行通信协议。它用于在计算机和外部设备之间进行数据传输。UART协议的特点是简单、易于实现，广泛应用于嵌入式系统、单片机和其他电子设备中。</p><h3 id="物理特性" tabindex="-1"><a class="header-anchor" href="#物理特性"><span>物理特性</span></a></h3><p>UART通信通常使用两根信号线：TX（发送）和RX（接收）。数据以串行方式传输，通常为8位数据位，1位起始位和1位停止位。波特率（Baud Rate）是UART通信的一个重要参数，表示每秒传输的比特数。</p><table><thead><tr><th style="text-align:center;">电平标准</th><th style="text-align:center;">信号类型</th><th style="text-align:center;">逻辑0</th><th style="text-align:center;">逻辑1</th><th style="text-align:center;">传输距离</th><th style="text-align:center;">传输速率</th></tr></thead><tbody><tr><td style="text-align:center;">TTL电平</td><td style="text-align:center;">0-5V</td><td style="text-align:center;">0V</td><td style="text-align:center;">5V</td><td style="text-align:center;">短距离</td><td style="text-align:center;">低速</td></tr><tr><td style="text-align:center;">RS232电平</td><td style="text-align:center;">-15V到+15V</td><td style="text-align:center;">-3V到-15V</td><td style="text-align:center;">+3V到+15V</td><td style="text-align:center;">中距离</td><td style="text-align:center;">中速</td></tr><tr><td style="text-align:center;">RS485电平</td><td style="text-align:center;">差分信号</td><td style="text-align:center;">-2V到-6V</td><td style="text-align:center;">+2V到+6V</td><td style="text-align:center;">长距离</td><td style="text-align:center;">高速</td></tr><tr><td style="text-align:center;">RS422电平</td><td style="text-align:center;">差分信号</td><td style="text-align:center;">-2V到-6V</td><td style="text-align:center;">+2V到+6V</td><td style="text-align:center;">长距离</td><td style="text-align:center;">高速</td></tr></tbody></table><h3 id="数据帧格式" tabindex="-1"><a class="header-anchor" href="#数据帧格式"><span>数据帧格式</span></a></h3><img src="/study-notes/assets/img/串口数据帧格式.dfa37152.png" width="600"><p><strong>关键参数如下</strong>：</p><ul><li><p><strong>波特率</strong>：UART通信是异步的，不需要时钟信号。发送方和接收方必须在波特率上保持一致，以确保数据正确传输。波特率是UART通信中数据传输的速率，通常以比特每秒（bps）表示。常见的波特率有9600、115200等。</p></li><li><p><strong>空闲状态</strong>：UART通信在没有数据传输时处于空闲状态，通常为逻辑1（高电平）。当数据传输开始时，发送方将信号线拉低（逻辑0）以表示起始位。</p></li><li><p><strong>数据位</strong>：UART通信通常使用8位数据位，但也可以使用5、6、7或9位数据位。低位(LSB)在前，高位(MSB)在后。</p></li><li><p><strong>起始位</strong>：每个数据帧以一个起始位开始，表示数据传输的开始。起始位通常为逻辑0。</p></li><li><p><strong>停止位</strong>：每个数据帧以0.5、1、1.5、2个停止位结束，表示数据传输的结束。停止位通常为逻辑1。</p></li><li><p><strong>奇偶校验</strong>：UART通信可以选择使用奇偶校验位来检测数据传输中的错误。奇偶校验位(1的个数为奇)可以是奇校验或偶校验。可省略。</p></li></ul><h3 id="接收模式" tabindex="-1"><a class="header-anchor" href="#接收模式"><span>接收模式</span></a></h3><table><thead><tr><th style="text-align:center;">接收模式</th><th>实现方法</th><th style="text-align:center;">优点</th><th style="text-align:center;">缺点</th></tr></thead><tbody><tr><td style="text-align:center;">固定格式</td><td>约定数据包的开始和结束标志，在中断函数中逐字符进行判断</td><td style="text-align:center;">简单高效</td><td style="text-align:center;">需要每个字符都进行判断，浪费 CPU 资源</td></tr><tr><td style="text-align:center;">接收中断+超时判断</td><td>接收中断+超时判断完成不定长数据的接收，通常来讲，两帧数据之间，会有个时间间隔。因此，我们可以使用一个计时器，如果在一个固定的时间点里没接收到新的字符，则认为一帧数据接收完成了。</td><td style="text-align:center;">高效</td><td style="text-align:center;">需要配置中断处理程序</td></tr><tr><td style="text-align:center;">空闲中断+DMA接收</td><td>和接收中断+超时判断类似，不过空闲中断是硬件自带，但超时判断需要我们自己实现。一旦接收到空闲中断，可以认为接收到一帧完整的数据。并使用DMA自动接收，释放CPU</td><td style="text-align:center;">效率最高</td><td style="text-align:center;">需要额外硬件支持，高端MCU有空闲中断，低端MCU可能没有。</td></tr></tbody></table><h3 id="发送模式" tabindex="-1"><a class="header-anchor" href="#发送模式"><span>发送模式</span></a></h3><table><thead><tr><th style="text-align:center;">发送模式</th><th>实现方法</th><th style="text-align:center;">优点</th><th style="text-align:center;">缺点</th></tr></thead><tbody><tr><td style="text-align:center;">直接发送</td><td>直接将数据写入发送寄存器，等待发送完成</td><td style="text-align:center;">简单高效</td><td style="text-align:center;">需要等待发送完成，可能阻塞</td></tr><tr><td style="text-align:center;">DMA发送</td><td>使用DMA控制器自动发送数据，释放CPU</td><td style="text-align:center;">高效，适合大数据量传输</td><td style="text-align:center;">需要额外硬件支持，配置复杂</td></tr></tbody></table><h2 id="i2c" tabindex="-1"><a class="header-anchor" href="#i2c"><span>I2C</span></a></h2><p><a href="https://blog.csdn.net/m0_38106923/article/details/123673285?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171066245616800182126176%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171066245616800182126176&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-123673285-null-null.142%5Ev99%5Epc_search_result_base7&amp;utm_term=I2C&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">一文搞懂I2C通信总线_i2c通信的详细讲解-CSDN博客</a><a href="https://blog.csdn.net/weixin_42031299/article/details/123602636?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171066529816800226524854%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=171066529816800226524854&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-4-123602636-null-null.142%5Ev99%5Epc_search_result_base7&amp;utm_term=I2C&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">I2C通信协议详解和通信流程分析_i2c通信的详细讲解-CSDN博客</a></p><h3 id="简介-3" tabindex="-1"><a class="header-anchor" href="#简介-3"><span>简介</span></a></h3><h3 id="物理特性-1" tabindex="-1"><a class="header-anchor" href="#物理特性-1"><span>物理特性</span></a></h3><h3 id="通讯特性" tabindex="-1"><a class="header-anchor" href="#通讯特性"><span>通讯特性</span></a></h3><p>开始和停止条件 地址传送 数据传送 总线应答 总线仲裁 空闲态 时钟同步/时钟延展</p><h2 id="spi" tabindex="-1"><a class="header-anchor" href="#spi"><span>SPI</span></a></h2><p><a href="https://blog.csdn.net/m0_61298445/article/details/124181396?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=SPI%E5%8D%8F%E8%AE%AE&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-124181396.142%5Ev99%5Epc_search_result_base7&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">【总线】SPI 通信协议_spi协议-CSDN博客</a></p><h3 id="简介-4" tabindex="-1"><a class="header-anchor" href="#简介-4"><span>简介</span></a></h3><p>SPI,全称（Serial Peripheral interface）是由摩托罗拉公司首先定义的协议，中文名为串型外围设备接口。SPI是一种高速全双工的总线协议 Serial（串型）：与并型相对应，单向数据通路只需要一根线，而同样常见的AMBA则为并型总线 Peripheral（外围）：指此总线多用来连接如“AD转换、EEPROM、PWM”等外围设备，即对应于AMBA的APB部分 Interface（总线接口）：很好理解，不再赘述。</p><h3 id="物理特性-2" tabindex="-1"><a class="header-anchor" href="#物理特性-2"><span>物理特性</span></a></h3><h3 id="通讯特性-1" tabindex="-1"><a class="header-anchor" href="#通讯特性-1"><span>通讯特性</span></a></h3><p><em>开始和停止条件</em><em>地址传送</em><em>数据传送</em><em>总线应答</em><em>总线仲裁</em><em>空闲态</em><em>时钟同步/时钟延展</em></p><h2 id="usb" tabindex="-1"><a class="header-anchor" href="#usb"><span>USB</span></a></h2><h2 id="rs485-rs232-rs422" tabindex="-1"><a class="header-anchor" href="#rs485-rs232-rs422"><span>RS485/RS232/RS422</span></a></h2><h3 id="简介-5" tabindex="-1"><a class="header-anchor" href="#简介-5"><span>简介</span></a></h3><p>RS485是一种串口接口标准，为了长距离传输采用差分方式传输，传输的是差分信号，抗干扰能力比RS232强很多。两线压差为-2~-6V表示0，两线压差为+2~+6V表示1</p><h3 id="特性及区别" tabindex="-1"><a class="header-anchor" href="#特性及区别"><span>特性及区别</span></a></h3><table><thead><tr><th>协议</th><th>双工</th><th>物理特性</th><th>线制</th><th>逻辑1</th><th>逻辑0</th><th>传输距离</th><th>传输速率</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>TTL</td><td>全双工</td><td>单端信号</td><td>三线制(TX/RX/GND)</td><td>0V~5V(信号线对GND)</td><td>0V~0.8V</td><td>短距离(15米)</td><td>中速(115200bps)</td><td></td><td></td></tr><tr><td>RS232</td><td>全双工</td><td>单端信号</td><td>三线制(TX/RX/GND)</td><td>-3V~-15V(信号线对GND)</td><td>+3V~+15V</td><td>中距离(50米)</td><td>中速(20Kbps)</td><td></td><td></td></tr><tr><td>RS422</td><td>全双工</td><td>差分信号</td><td>四线制(T+/T-/R+/R-)</td><td>+2V~+6V(发送)<br>&gt;200mV(接收)</td><td>-2V~-6V(发送）<br>&lt;200mV(接收)</td><td>长距离(4000米)</td><td>高速(10Mbps)</td><td></td><td></td></tr><tr><td>RS485</td><td>半双工</td><td>差分信号</td><td>两线制(A/B)</td><td>+2V~+6V(AB间电压差)</td><td>-2V~-6V</td><td>长距离(1200米)</td><td>高速(10Mbps)</td><td></td><td></td></tr></tbody></table><h3 id="简介-6" tabindex="-1"><a class="header-anchor" href="#简介-6"><span>简介</span></a></h3><p>RS485是一种串口接口标准，为了长距离传输采用差分方式传输，传输的是差分信号，抗干扰能力比RS232强很多。两线压差为-2~-6V表示0，两线压差为+2~+6V表示1</p><h3 id="物理特性-3" tabindex="-1"><a class="header-anchor" href="#物理特性-3"><span>物理特性</span></a></h3><p>半双工</p><p>逻辑1：+2V~+6V 逻辑0： -2V~ -6V 注意485的电平指的是485-A和485-B两根传输线，两线间的电压差。而不是传输线上的电压</p><h2 id="rs232" tabindex="-1"><a class="header-anchor" href="#rs232"><span>RS232</span></a></h2><p>RS232：是电子工业协会(Electronic Industries Association，EIA) 制定的异步传输标准接口，同时对应着电平标准和通信协议（时序），其电平标准：+3V～+15V对应0，-3V～-15V对应1。</p><p>全双工 逻辑1：-15V–5V 逻辑0：+3V–+15V</p><h2 id="lin" tabindex="-1"><a class="header-anchor" href="#lin"><span>LIN</span></a></h2><h2 id="can" tabindex="-1"><a class="header-anchor" href="#can"><span>CAN</span></a></h2><h3 id="can-fd" tabindex="-1"><a class="header-anchor" href="#can-fd"><span>CAN-FD</span></a></h3><h3 id="上层协议-1" tabindex="-1"><a class="header-anchor" href="#上层协议-1"><span>上层协议</span></a></h3><h4 id="canopen" tabindex="-1"><a class="header-anchor" href="#canopen"><span>CANopen</span></a></h4><h5 id="开源协议栈" tabindex="-1"><a class="header-anchor" href="#开源协议栈"><span>开源协议栈</span></a></h5><p><a href="http://www.canfestival.org/" target="_blank" rel="noopener noreferrer">canfestival</a><br><a href="https://github.com/CANopenNode/CANopenNode" target="_blank" rel="noopener noreferrer">CanopenNode</a><br><a href="https://github.com/embedded-office/canopen-stack" target="_blank" rel="noopener noreferrer">CANopen Stack</a><br><a href="https://www.armbbs.cn/forum.php?mod=viewthread&amp;tid=96706" target="_blank" rel="noopener noreferrer">uC/CANopen</a><br><a href="https://gitlab.com/lely_industries/lely-core" target="_blank" rel="noopener noreferrer">Lely CANopen</a></p><h3 id="学习资料" tabindex="-1"><a class="header-anchor" href="#学习资料"><span>学习资料</span></a></h3><p><a href="https://blog.csdn.net/choujize1282/article/details/100809233" target="_blank" rel="noopener noreferrer">CanOpen学习笔记5-- CanFestival使用提示</a><a href="https://blog.csdn.net/qq_40104597/article/details/105773842" target="_blank" rel="noopener noreferrer">SDO</a><a href="https://blog.csdn.net/qq_15181569/article/details/105812295" target="_blank" rel="noopener noreferrer">canOpen学习二之canOpen应用实现请求节点状态、改变节点状态、写字典、读字典</a><a href="https://blog.csdn.net/choujize1282/article/details/100809232" target="_blank" rel="noopener noreferrer">CanOpen学习笔记4-- 建立SDO通信</a><a href="https://download.csdn.net/download/lingdianhao/12697541" target="_blank" rel="noopener noreferrer">CANopen开源协议栈 Canfestival源代码中文注释.rar</a><a href="https://blog.csdn.net/qq_43259179/article/details/106500111" target="_blank" rel="noopener noreferrer">基于STM32的Can_Festival调试问题3 -- SDO修改心跳时间过很久才有反应</a><a href="https://blog.csdn.net/qq_27620407/article/details/109214157" target="_blank" rel="noopener noreferrer">CANopen使用方法与对象字典主要参数</a><a href="https://blog.csdn.net/qq_42860269/article/details/126189812" target="_blank" rel="noopener noreferrer">canopen主站功能测试</a><a href="https://blog.csdn.net/qq_37662088/article/details/123566073" target="_blank" rel="noopener noreferrer">CANopen补充--主站检测节点是否在线</a><a href="https://blog.csdn.net/qq_15181569/article/details/106190676" target="_blank" rel="noopener noreferrer">canOpen学习九之canOpen应用实现主机自动发送同步帧</a><a href="https://blog.csdn.net/qq_15181569/article/details/105855756" target="_blank" rel="noopener noreferrer">canOpen学习四之canOpen应用实现主机检测从机丢失</a><a href="https://blog.csdn.net/lushoumin/article/details/92841982" target="_blank" rel="noopener noreferrer">CanFestival字典生成</a><a href="https://blog.csdn.net/qq_37662088/article/details/123263133" target="_blank" rel="noopener noreferrer">基于STM32F4的CANopen快速SDO通信（超级详细）</a><a href="https://blog.csdn.net/wallace89/article/details/119190305" target="_blank" rel="noopener noreferrer">嵌入式CANopen协议从入门到落地产品（更新2021.9.8）</a><a href="https://blog.csdn.net/wallace89/article/details/111020289" target="_blank" rel="noopener noreferrer">STM32H743+CubeIDE-CanFestival实现两个CANopen Master同时独立运行</a><a href="https://blog.csdn.net/bmliupan/article/details/98055255" target="_blank" rel="noopener noreferrer">canfestival源代码注释</a><a href="https://download.csdn.net/download/feng5200yu5/19765264" target="_blank" rel="noopener noreferrer">STM32F103C8T6 CanFestival 心跳监测.rar</a><a href="https://blog.csdn.net/agony_isolate/article/details/106738590" target="_blank" rel="noopener noreferrer">canFestival移植（3）-----SDO快速收发函数应用分析</a><a href="https://blog.csdn.net/lushoumin/article/details/93051433" target="_blank" rel="noopener noreferrer">CanFestival应用</a><a href="https://blog.csdn.net/weixin_44118217/article/details/121265571" target="_blank" rel="noopener noreferrer">CANopen：移植CANFestival以及应用（基于CUBEMX HAL库）大礼包</a><a href="https://blog.csdn.net/weixin_44161807/article/details/123923680" target="_blank" rel="noopener noreferrer">CANFestival简介</a><a href="https://blog.csdn.net/iamplane/article/details/49944491" target="_blank" rel="noopener noreferrer">CANFestival简介</a><a href="https://blog.csdn.net/u012846795/article/details/121008306" target="_blank" rel="noopener noreferrer">CANOpen协议详解（二）：协议具体内容</a><a href="https://blog.csdn.net/u012846795/article/details/121008265" target="_blank" rel="noopener noreferrer">CANOpen协议详解（一）：CANfestival源码分析</a><a href="https://blog.csdn.net/sinat_19440229/article/details/86712013" target="_blank" rel="noopener noreferrer">CanFestival协议栈从站实现和源码简析</a><a href="https://blog.csdn.net/ybhuangfugui/article/details/99826257" target="_blank" rel="noopener noreferrer">CANOpen系列教程11_深度分析CanFestival_3架构</a><a href="https://blog.csdn.net/zdc1122/article/details/81220580" target="_blank" rel="noopener noreferrer">CanFestival移植中的心跳问题</a><a href="https://blog.csdn.net/agony_isolate/article/details/106736726" target="_blank" rel="noopener noreferrer">canFestival移植（2）</a><a href="https://blog.csdn.net/MmikerR/article/details/106487947?spm=1001.2014.3001.5506" target="_blank" rel="noopener noreferrer">(111条消息) 基于ZYNQ的开源CANopen协议栈CANFestival移植_MmikerR的博客-CSDN博客_canfestival 节点守护</a><a href="https://wenku.baidu.com/view/63617379383567ec102de2bd960590c69ec3d800?pcf=2&amp;bfetype=new&amp;bfetype=new" target="_blank" rel="noopener noreferrer">CANOpen服务数据对象报文 - 百度文库</a><a href="https://blog.csdn.net/agony_isolate/article/details/106738590?spm=1001.2014.3001.5506" target="_blank" rel="noopener noreferrer">(109条消息) canFestival移植（3）-----SDO快速收发函数应用分析_agony_isolate的博客-CSDN博客_canfestival sdo</a><a href="https://www.it610.com/article/1290517464798535680.htm" target="_blank" rel="noopener noreferrer">CANOpen服务数据对象报文 - it610.com</a><a href="https://blog.csdn.net/qq_40104597/article/details/105773842?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166597385916800184145136%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=166597385916800184145136&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-105773842-null-null.142%5Ev57%5Econtrol_1,201%5Ev3%5Eadd_ask&amp;utm_term=SDOlineToObjdict&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">(111条消息) SDO_史蒂芬_丁的博客-CSDN博客</a><a href="https://my.oschina.net/u/3583648/blog/1488473" target="_blank" rel="noopener noreferrer">CanOpen学习笔记4-- 建立SDO通信 - bo_zhang的个人空间 - OSCHINA - 中文开源技术交流社区</a></p><h3 id="其他未整理" tabindex="-1"><a class="header-anchor" href="#其他未整理"><span>其他未整理</span></a></h3><p><a href="https://mp.weixin.qq.com/s/GeGLQKnx_gXebGBIDuZIkA" target="_blank" rel="noopener noreferrer">【技术分享】CAN总线接口保护电路设计指南 (qq.com)</a><a href="https://zhuanlan.zhihu.com/p/34333969" target="_blank" rel="noopener noreferrer">CAN总线标准接口与布线规范</a><a href="https://www.zhihu.com/question/35630289/answer/650086824" target="_blank" rel="noopener noreferrer">如何进行汽车 CAN 总线开发？</a><a href="https://zhuanlan.zhihu.com/p/268498263" target="_blank" rel="noopener noreferrer">CAN通讯系列--CAN通讯简介1</a><a href="https://www.zhihu.com/question/35630289/answer/1475265732" target="_blank" rel="noopener noreferrer">如何进行汽车 CAN 总线开发？</a><a href="https://zhuanlan.zhihu.com/p/625621861" target="_blank" rel="noopener noreferrer">从CAN Transceiver角度，理解两帧网络管理报文唤醒网络的原理</a><a href="https://zhuanlan.zhihu.com/p/234694992" target="_blank" rel="noopener noreferrer">商用车网络设计利器—SAE J1939协议</a><a href="https://zhuanlan.zhihu.com/p/43802975" target="_blank" rel="noopener noreferrer">CAN 系统在国防与农业上的应用</a><a href="https://zhuanlan.zhihu.com/p/30247549" target="_blank" rel="noopener noreferrer">如何学习CAN总线</a><a href="https://zhuanlan.zhihu.com/p/618265492" target="_blank" rel="noopener noreferrer">CAN协议 实战STM32F4 CAN</a><a href="https://zhuanlan.zhihu.com/p/447272040" target="_blank" rel="noopener noreferrer">一篇易懂的CAN通讯协议指南</a><a href="https://www.zhihu.com/question/57714760/answer/975529350" target="_blank" rel="noopener noreferrer">汽车CAN解析过程中，PGN这一块如何理解，如何使用？</a><a href="https://www.zhihu.com/question/24085250/answer/38829244" target="_blank" rel="noopener noreferrer">如何学习汽车 CAN-BUS 系统</a><a href="https://zhuanlan.zhihu.com/p/651301139" target="_blank" rel="noopener noreferrer">搞嵌入式必懂的 CAN 总线知识</a><a href="https://www.bilibili.com/video/BV1Lw411n7ik/" target="_blank" rel="noopener noreferrer">【吸口冷知识】CAN总线保卫战中，TDK力推什么ESD防护元件？</a><a href="https://blog.csdn.net/android_lover2014/article/details/80009098" target="_blank" rel="noopener noreferrer">CANOpen服务数据对象报文</a><a href="https://blog.csdn.net/whahu1989/article/details/127192507" target="_blank" rel="noopener noreferrer">学习CANopen --- [8] 多主机同时运行时的问题</a><a href="https://www.bilibili.com/video/BV1214y1c7Ut/" target="_blank" rel="noopener noreferrer">【金橙智能】手把手教你学习CAN通信</a><a href="https://blog.csdn.net/HandsomeHong/article/details/123307202" target="_blank" rel="noopener noreferrer">细数基于can之上的应用层协议</a><a href="https://blog.csdn.net/Cheatscat/article/details/108151542" target="_blank" rel="noopener noreferrer">Tbox在整车CAN网络的位置与作用--远程控制和远程诊断</a><a href="https://blog.csdn.net/lamanchas/article/details/121880449" target="_blank" rel="noopener noreferrer">车载网络结构（车内）-基础概念</a><a href="https://blog.csdn.net/ChenGuiGan/article/details/88060299" target="_blank" rel="noopener noreferrer">整车CAN网络拓扑图</a><a href="https://blog.csdn.net/bjxdbz/article/details/124435792" target="_blank" rel="noopener noreferrer">CAN(FD)收发器选型及替换指南(二)</a><a href="https://blog.csdn.net/passerbyyuan/article/details/51671563" target="_blank" rel="noopener noreferrer">TJA1050T CAN总线通信硬件原理</a><a href="https://blog.csdn.net/zvvzxzko2006/article/details/109050242" target="_blank" rel="noopener noreferrer">拖拉机控制关键协议 ISO-11783 协议解析</a><a href="https://blog.csdn.net/Bruce_Qee/article/details/117608885" target="_blank" rel="noopener noreferrer">SAE J1939协议（一）</a><a href="https://blog.csdn.net/qq_28514991/article/details/101350628" target="_blank" rel="noopener noreferrer">通信总线-现场总线-CAN</a><a href="https://blog.csdn.net/weixin_39940714/article/details/110596986" target="_blank" rel="noopener noreferrer">canopen协议详解_汽车CAN总线详解</a><a href="https://blog.csdn.net/weixin_39527292/article/details/111486998" target="_blank" rel="noopener noreferrer">can总线短距离不用双绞线_电磁干扰很严重，如何提高CAN总线电磁兼容性</a><a href="https://blog.csdn.net/bonson2004/article/details/68924343" target="_blank" rel="noopener noreferrer">汽车CAN总线关闭故障的诊断与恢复</a><a href="https://blog.csdn.net/qfmzhu/article/details/107335763" target="_blank" rel="noopener noreferrer">CAN Busoff原理/快慢恢复介绍以及利用Vector VH6501 CAN干扰仪经典CAN2.0/CANFD帧触发Busoff</a><a href="https://blog.csdn.net/weixin_44283390/article/details/128398383" target="_blank" rel="noopener noreferrer">CAN通信物理容错测试CAN_H与CAN_L、与GND、与电源短路，busoff</a><a href="https://blog.csdn.net/meteorite91/article/details/69153531" target="_blank" rel="noopener noreferrer">CAN网络开路和短路带来的影响</a><a href="https://blog.csdn.net/qq_15181569/article/details/111028147" target="_blank" rel="noopener noreferrer">CAN、485隔离电路分享</a></p><h4 id="can通讯学习" tabindex="-1"><a class="header-anchor" href="#can通讯学习"><span>CAN通讯学习</span></a></h4><p>CAN协议的特点：</p><ol><li>多主控制，利用ID标识符来分辨</li><li>系统柔软性，没有类似地址的信息</li><li>速度快，距离远</li><li>具有错误检测、错误通知和错误恢复功能</li><li>故障封闭功能</li><li>连接节点多</li></ol><p>电平定义：</p><ul><li>显性电平：逻辑0；CAN_High=3.5V，CAN_Low=1.5V</li><li>隐形电平：逻辑1；CAN_High=2.5V，CAN_Low=2.5V</li><li>总线上显性电平优先</li></ul><p>帧类型</p><ol><li>数据帧：用于发送单元向接收单元传送数据的帧</li><li>远程帧：用于接收单元向具有相同ID的发送单元请求数据的帧</li><li>错误帧：用于当检测出错误时向其它单元通知错误的帧</li><li>过载帧：用于接收单元通知其尚未做好接收准备的帧</li><li>间隔帧：用于将数据帧及遥控帧与前面的帧分离开来的帧</li></ol><p>数据帧和远程帧有标准格式（11位标识符ID）和扩展格式（29位ID）</p><p>数据帧由7各段组成</p><ol><li><p>帧起始：表示数据帧开始的段</p></li><li><p>仲裁段：表示该帧优先级的段</p></li><li><p>控制段：表示数据的字节数及保留位的段</p></li><li><p>数据段：数据的内容，一帧可发送0-8字节个字节的数据</p></li><li><p>CRC段：检查帧的传输错误的段</p></li><li><p>ACK段：表示确认正常接收的段</p></li><li><p>帧结束：表示数据帧结束的段</p></li></ol><p>![CAN1](.\assets\CAN1.png]</p><p>起始帧SOF是1位显性0</p><p>RTR在数据帧中必须为显性0，在远程帧里为隐形1；因此数据帧优先于远程帧。SRR是是隐形位。因此标准格式优先于扩展格式。</p><p>IDE在标准格式中为显性0，在扩展格式下位隐形1；标准格式下IDE属于控制场，扩展格式下IDE属于仲裁场。</p><p>控制场有6个位，其中4位长度数据；表示0-8个字节；保留位r0和r1必须为显性0。</p><p>CRC场有16位，其中15位CRC序列和1位CRC界定符</p><p>应答场有2位，发送位发送2位隐形1，接收器正确接收有效报文后，在第一位时发送1位显性0以示应答</p><p>帧结尾EOF在数据帧和远程帧中都是由7位隐形1组成</p><p><img src="/study-notes/assets/img/CAN2.cdf118ba.png" alt="CAN2"></p><h4 id="深入浅出讲解can总线" tabindex="-1"><a class="header-anchor" href="#深入浅出讲解can总线"><span>深入浅出讲解CAN总线</span></a></h4><p>伺服与运动控制 <em>2020-06-04 17:10</em></p><p>点击<strong>蓝字</strong>  <strong>关注****伺服与运动控制</strong></p><p>现场总线是当今自动化领域技术发展的热点之一，被誉为自动化领域的计算机局域网。CAN是控制器局域网络(Controller Area Network, CAN)的简称，是国际上应用最广泛的现场总线之一。CAN 的高性能和可靠性已被认同，并被广泛地应用于工业自动化、船舶、医疗设备、工业设备等方面。</p><p><strong>先看看工作原理</strong></p><p>当 CAN 总线上的一个节点（站）发送数据时，它以报文的形式广播给网络中所有节点，对每个节点来说，无论数据是否是发给自己的，都对其接收。</p><p>每组报文开头的11 位字符为标识符，定义了报文的优先级，这种报文格式成为面向内容的编制方案。同一系统中标识符是唯一的，不可能有两个站发送具有相同标识符的报文，当几个站同时竞争总线读取时，这种配置十分重要。</p><p>大体的工作原理我们搞清了，但是根本的协议我们还要花一番功夫。下面介绍一个重要的名词，“显性”和“隐性”：</p><p>在我看到的很多文章里，有很多显性和隐性的地方，为此我头痛不已，最终我把它们彻底弄明白了。</p><p>首先 CAN 数据总线有两条导线，一条是黄色的，一条是绿色的------分别是CAN_High 线和CAN_Low 线，当静止状态时，这两条导线上的电平一样，这个电平称为静电平，大约为2.5 伏。</p><p>这个静电平状态就是隐形状态，也称隐性电平，也就是没有任何干扰的时候的状态称为隐性状态。当有信号修改时，CAN_High 线上的电压值变高了，一般来说会升高至少1V；而CAN_Low 线上的电压值会降低一个同样值，也是1v。</p><p>那么这时候，CAN_High 就是 2.5v+1v=3.5v，它就处于激活状态了。而CAN_Low 降为2.5v-1v=1.5v。可以看看这个图</p><p><strong>由此我们得到</strong></p><p>在隐性状态下，CAN_High 线与CAN_Low 没有电压差，这样我们看到没有任何变化也就检测不到信号。但是在显性状态时，改值最低为2V，我们就可以利用这种变化才传输数据了。所以出现了那些帧，那些帧中的场，那些场中的位，云云。</p><p>在总线上通常逻辑1 表示隐性。而0 表示显性。这些1 啊，0 啊，就可以利用起来为我们传数据了。利用这种电压差，我们可以接收信号。</p><p>一般来说，控制单元通过收发器连接到 CAN 驱动总线上，这个收发器（顾名思义，可发送，可接收）内有一个接收器，该接收器是安装在接收一侧的差动信号放大器。然后，这个放大器很自然地就放大了CAN_High 和CAN_Low 线的电平差，然后传到接收区。如下图</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbVykSnRPkIicZLibcVg6GIwXAWxhm6vEEicVdvyicyT6DAdGgvFxMp2YHTQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbVykSnRPkIicZLibcVg6GIwXAWxhm6vEEicVdvyicyT6DAdGgvFxMp2YHTQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>由上图可知，当有电压差，差动信号放大器放大传输，将相应的数据位转化为0。</p><p><strong>下面我们进入重点难点-----报文</strong></p><p>所谓报文，就是CAN 总线上要传输的数据报，为了安全，我们要给我们传输的数据报编码定一下协议，这样才能不容易出错，所以出现了很多的帧，以及仲裁啊，CRC 效验。这些都是难点。</p><p><strong>识别符的概念</strong></p><p>识别符顾名思义，就是为了区分不同报文的可以鉴别的好多字符位。有标准的，和扩展的。标准的是11 位，扩展的是29 位。他有一个功能就是可以提供优先级，也就是决定哪个报文优先被传输，报文标识符的值越小，报文具有越高的优先权。</p><p>CAN 的报文格式有两种，不同之处其实就是识别符长度不同，具有11 位识别符的帧称为标准帧，而还有29 位识别符的帧为扩展帧，CAN 报文有以下4 个不同的帧类型。分别是：</p><p>（1） 数据帧：数据帧将数据从发送器传输到接收器；</p><p>（2） 远程帧：总线节点发出远程帧，请求发送具有同一标识符的数据帧；</p><p>（3） 错误帧：任何节点检测到总线错误就发出错误帧；</p><p>（4） 过载帧：过载帧用已在先行的后续的数据帧（或远程帧）之间提供一附加的延时。</p><p><strong>我们先研究数据帧吧。</strong></p><p><strong>一，数据帧由 7 个不同位场组成</strong>（帧起始、仲裁场、控制场、数据场、CRC场、应答场、帧结尾）。</p><p>这里的位场，就是不同位的组合，这名字起的很烂，让人看了感觉很抽象。我们来看看这些个不同的位场吧。一开始是一位帧起始，也叫SOF。它用显性位表示，也就是0；它告诉我们，两个线上有电压差了，也就是有数据了。</p><p>这个帧起始看起来只有一位，其实不简单了。为了让所有的分站都同步于发送报文的发送站，好接收数据，有很多要考虑的地方。</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbAhQSFiav2DVL3ibPCZZa1AxoK5ibtK2rqiaJK3KeibTrvj6W5fdIIwh189Q/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbAhQSFiav2DVL3ibPCZZa1AxoK5ibtK2rqiaJK3KeibTrvj6W5fdIIwh189Q/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p><strong>报文的数据帧结构</strong></p><p>然后下一个场是仲裁场。这个仲裁很抽象，其实在这里就是为了解决一个问题。如果2 个或2 个以上的单元同时开始传送报文，那么就会有总线访问冲突，那么仲裁机制就是用来根据标识符优先级来一个一个的去掉低级别的数据。我们可以详细的描述这场生动的争抢总线的战斗。</p><p>当总线处于空闲状态时呈隐性电平，此时任何节点都可以向总线发送显性电平作为帧的开始。2 个或2 个以上的节点同时发送开始争抢总线，但是总线只能被一个人抢走。这时候到底怎么决定谁留下，谁滚蛋呢。我们开始思索，我们以前定义了标识符，标识符有优先级，它越小，它优先级越高。那么怎么实现的呢。看下面图：</p><p>首先搞明白两点，</p><p>一、下图中， 低波形代表0（显性），高波形代表1（隐性）；</p><p>二、当隐性碰到显性，就变为显性。</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbbmhORsaKrMBkZwZKk8ocl9jcTMtBCFbIwHoIUz2R6INJSu6x9picFzQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbbmhORsaKrMBkZwZKk8ocl9jcTMtBCFbIwHoIUz2R6INJSu6x9picFzQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>如图所示，节点 A 和节点B 的标识符的第10、9、8 位电平相同，因此两个节点侦听到的信息和它们发出的信息相同。第7位节点B发出一个“1”，但从节点上接收到的消息却是“0”。</p><p>为什么呢，因为A 节点同时发出显性位，让总线也变成显性了，也就是0。节点B 会退出发送处于单纯监听方式而不发送数据；节点A 成功发送仲裁位从而获得总线的控制权，继而发送全部消息。</p><p>总线中的信号持续跟踪最后获得总线控制权发出的报文，本例中节点A的报文将被跟踪。这种非破坏性位仲裁方法的优点在于，在网络最终确定哪个节点被传送前，报文的起始部分已经在网络中传输了，因此具有高优先级的节点的数据传输没有任何延时。</p><p>在获得总线控制权的节点发送数据过程中，其他节点成为报文的接收节点，并且不会在总线再次空闲之前发送报文，在这逐位的比较中，最终节点B 因为第七位的偏差丢掉了总线。从此单纯监听，江山就拱手让给了节点A 了。这就是仲裁机制。</p><p>上面我们说过，报文有两种格式，标准和扩展。这里，不同的格式仲裁场是不一样的。标准格式下，仲裁场由11 位识别符和RTR 位组成。</p><p>但在扩展格式里，包括29 位识别符、SRR 位、IDE 位、RTR 位。</p><p>RTR 位，Remote Tranmission Request BIT 全称为远程发送请求位。它在数据帧里必须为显性0 ，但在远程帧里为隐性1。</p><p>我晕，为什么这么搞呢，不急，先留着这个问题。</p><p>SRR 位，替代远程请求位，SRR 是一隐性位，也就是1，它在扩展格式的标准帧RTR 位位置，那么标准帧怪不得优先于扩展帧了，因为在传输完11 位标识符之后（扩展帧的后18 位在最后发送，先发送11 位标识符），轮到标准帧的RTR 位和扩展帧的SRR 位了。</p><p>这时候，标准帧的RTR 为显性，而扩展帧SRR 为隐性，这样，总线自然就被标准帧占据。</p><p>同时上面那个问题，也一目了然了，CAN 总线协议设计者，肯定是设计了数据帧优先于远程帧。所以IDE(Identifier Extension Bit)，全称识别符扩展位，它属于扩展格式的仲裁场。</p><p>对于扩展格式，IDE位属于仲裁场；对于标准格式，IDE位属于控制场。标准格式的IDE位为“显性”，而扩展格式的IDE位为“隐性”。</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPb67HibfxyfMib5QhRx0ZjyYKGXB5rjd5akGOFI8MEJiaWNUakj16jaibROw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPb67HibfxyfMib5QhRx0ZjyYKGXB5rjd5akGOFI8MEJiaWNUakj16jaibROw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>标准格式中的数据帧</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbRCCPQP22Pcib6tg5NzdF67ttFOlQfuXzKahnovYgWIF1aWXKoE7bibjg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbRCCPQP22Pcib6tg5NzdF67ttFOlQfuXzKahnovYgWIF1aWXKoE7bibjg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>拓展格式中的数据帧</p><p><strong>控制场</strong></p><p>控制场由6个位组成，标准格式和扩展格式的控制场格式不同。标准格式里的帧包括数据长度代码、IDE位（为显性位）及保留位r0。扩展格式里的帧包括数据长度代码和两个保留位：r1和r0。其保留位必须发送为显性，但是接收器认可“显性”和“隐性”位的任何组合。其结构如图所示：</p><p><strong>控制场结构</strong></p><p>数据长度代码（标准格式以及扩展格式）DLC，如下表所示</p><p><strong>数据帧长度代码DLC</strong></p><p>数据长度代码指示了数据场里的字节数量。其中：d—“显性”， r—“隐性”，数据帧允许的数据字节数为{0，1，...，7，8}。其他的数值不允许使用。</p><p><strong>数据场</strong></p><p>数据场由数据帧里的发送数据组成。它可以为0~8个字节，每字节包含了8个位，首先发送最高有效位（MSB）。</p><p>循环冗余码CRC场是数据通信领域中最常用的一种差错校验码，其特征是信息字段和校验字段的长度可以任意选定。</p><p>CRC场包括CRC序列（CRC Sequence），其后是CRC界定符（CRC Delimiter），结构如图：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPb0ibl1LBWI6LxiaTglwdO7jXq7TU9BrWfSmmWYP0RLlCQDr3hZcjnrgoQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPb0ibl1LBWI6LxiaTglwdO7jXq7TU9BrWfSmmWYP0RLlCQDr3hZcjnrgoQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p><strong>生成 CRC 码的基本原理：</strong></p><p>任意一个由二进制位串组成的代码都可以和一个系数仅为‘0’和‘1’取值的多项式一一对应。例如：代码1010111 对应的多项式为x6+x4+x2+x+1，而多项式为x5+x3+x2+x+1 对应的代码101111。</p><p>参考一下下面的例题，自已再领悟一下吧！已知信息位为1101，生成多项式G(x)= x3+x+1，求CRC 码。</p><p>要传输的信息序列为1101，在末尾添加所给多项式的最高次阶个0，如本题为x^3，则添加3个0,变为：1101000；</p><p>由多项式G(X)=X3+X+1，得其阶数为1的二进制编码为：1011；1101000对1011进行模二除法，所得到的余数即为校验码，把校验码添加在原数据尾部即为所求的编码,则实际发送的数据序列为1101001。校验码计算过程如图所示：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/Hlibq5A7Z6tP4ibBCAEYYDTeicCJeVkLQU9MiaHWLthHRpVRg9b1GquWqXDGLp34YkSXR0HkRDJpgcX8GfT4gnrudg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Hlibq5A7Z6tP4ibBCAEYYDTeicCJeVkLQU9MiaHWLthHRpVRg9b1GquWqXDGLp34YkSXR0HkRDJpgcX8GfT4gnrudg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>模二除法</p><p><strong>应答场（ACK Field）</strong></p><p>应答场长度为2个位，包含应答间隙（ACK Slot）和应答界定符（ACK Delimiter），如图所示。在ACK场（应答场）里，发送节点发送两个“隐性”位。</p><p>当接收器正确地接收到有效的报文，接收器就会在应答间隙（ACK Slot）期间向发送器发送一“显性”位以示应答。</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbXI3qlIZWqFPoxfsRLfQNWw6zbnkXTRhBsxx88yT9HuGGBoOANgebYg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbXI3qlIZWqFPoxfsRLfQNWw6zbnkXTRhBsxx88yT9HuGGBoOANgebYg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p><strong>帧结尾</strong></p><p>每一个数据帧和远程帧均由一标志序列界定。这个标志序列由7个“隐性”位组成。</p><p><strong>二、远程帧</strong></p><p>通过发送远程帧，总线的节点发出远程帧，请求以前发送给它数据帧的节点再发送一遍。具体发送哪个数据帧，由远程帧的标识符决定。</p><p>与数据帧类似，远程帧也有标准格式和扩展格式，而且都由6个不同的位场组成：帧起始、仲裁场、控制场、CRC场、应答场、帧结尾。</p><p>与数据帧相反，远程帧的RTR位是“隐性”的。它没有数据场，数据长度代码DLC的数值是不受制约的（可以标注为容许范围０~8里的任何数值），此数值是相应于数据帧的数据长度代码。远程帧结构如图所示：</p><p>远程帧结构</p><p><strong>三、错误帧</strong></p><p>错误帧由两个不同的场组成，第一个场是不同节点提供的错误标志（Error Flag）的叠加，第二个场是错误界定符。</p><p>为了能正确地终止错误帧，“错误认可”的节点要求总线至少有长度为3个位时间的总线空闲。因此，总线的载荷不应为100%。错误帧结构如图：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbicsLS7s2KuakjN4AURYZLUelPHQZs8gQjbswNB7lcmDRYQN2YwakpVg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbicsLS7s2KuakjN4AURYZLUelPHQZs8gQjbswNB7lcmDRYQN2YwakpVg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>错误帧结构（图中统一起见出错帧改为错误帧）</p><p>(1) 错误标志，有两种形式的错误标志：激活错误标志 和 认可错误标志</p><p>“激活错误”标志由6个连续的“显性”位组成；“认可错误”标志由6个连续的“隐性”的位组成，除非被其他节点的“显性”位重写。</p><p>(2) 错误界定符，错误界定符包括8个“隐性”的位。</p><p>错误标志传送了以后，每一个节点就发送一个“隐性”的位，并一直监视总线直到检测出一个“隐性”的位为止，然后就开始发送其余7个“隐性”位。</p><p><strong>四、过载帧</strong></p><p>过载帧（Overload Frame）包括两个位场：过载标志 和 过载界定符，其结构如图：</p><p>过载帧结构图</p><p>有三种过载的情况会引发过载标志的传送：接收器的内部情况，需要延迟下一个数据帧和远程帧。</p><p>在间歇（Intermission）的第1和第2字节检测到一个“显性”位。这里有个间歇的概念。我们可以讲讲。间歇属于帧间空间的一部分。它包含三个隐性位。间歇期间，所有的站不允许传送数据帧或远程帧。它唯一要做的就是标示一个过载条件。</p><p>如果CAN节点在错误界定符或过载界定符的第8位（最后一位）采样到一个显性位，节点会发送一个过载帧。该帧不是错误帧，错误计数器不会增加。</p><p>（1）过载标志（Overload Flag）</p><p>过载标志由6个“显性”的位组成。过载标志的所有形式和“激活错误”标志的一样。</p><p>（2）过载界定符（Overload Delimiter）</p><p>过载界定符包括8个“隐性”的位。</p><p><strong>五、帧间空间</strong></p><p>数据帧（或远程帧）与先行帧的隔离是通过帧间空间实现的，无论此先行帧类型如何（数据帧、远程帧、错误帧、过载帧）。</p><p>帧间空间包括间歇、总线空闲的位场。如果“错误认可”的节点已作为前一报文的发送器，则其帧间空间除了间歇、总线空闲外，还包括称作“挂起传送”（暂停发送）（Suspend Transmission）的位场。</p><p>对于不是“错误认可”的节点，或作为前一报文的接收器的节点，其帧间空间如图：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbia3lgoZic3l2QzkHaibVSSUUbLsYCOaiavaF2MQgriauNs0GCxSYKToAz0w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbia3lgoZic3l2QzkHaibVSSUUbLsYCOaiavaF2MQgriauNs0GCxSYKToAz0w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>非 “错误认可”帧间空间</p><p>对于作为前一报文发送器的“错误认可”的节点，其帧间空间如图：</p><p>“错误激活”帧间空间</p><p>（1）总线空闲（Bus Idle）</p><p>总线空闲的时间是任意的。只要总线被认定为空闲，任何等待发送报文的节点就会访问总线。在发送其他报文期间，有报文被挂起，对于这样的报文，其传送起始于间歇之后的第一个位。总线上检测到的“显性”的位可被解释为帧的起始。</p><p>（2）挂起传送（Suspend Transmission）</p><p>“错误认可”的节点发送报文后，节点就在下一报文开始传送之前或总线空闲之前发出8个“隐性”的位跟随在间歇的后面。如果与此同时另一节点开始发送报文（由另一节点引起），则此节点就作为这个报文的接收器。</p><p>最后用脑图总结：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbquia1BsHl7SPnZf4nhT53XYPiaavlwUBy5KQ77rwKdw5fFz59icLHnAkA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbquia1BsHl7SPnZf4nhT53XYPiaavlwUBy5KQ77rwKdw5fFz59icLHnAkA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>再来几张实物图：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbqJaz5t6DIibjP4XJ9wHdqvqdvFq1jeXwzDjeyDxOIGSsn9hQevo6UfQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbqJaz5t6DIibjP4XJ9wHdqvqdvFq1jeXwzDjeyDxOIGSsn9hQevo6UfQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>CAN总线接收芯片</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbXbDZm70Aaib2AOZOYicufpLdOiboQcHMkka4OsklvHaxz1AialOGPyuZVg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbXbDZm70Aaib2AOZOYicufpLdOiboQcHMkka4OsklvHaxz1AialOGPyuZVg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>CAN总线控制器芯片</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbMsSIDT1V3Fc4SC0QsenmLMtiazQBBv6TwMjGPlK4CmmTuEHPR5AKWUQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbMsSIDT1V3Fc4SC0QsenmLMtiazQBBv6TwMjGPlK4CmmTuEHPR5AKWUQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>标准数据帧波形捕获</p><p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbM2BvYzFQSZOODdYxyvdB1kmhibD1jibd0JTS5P2yUsiajbBVZ0YiaibUvjA/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/XM55D4pxMhDibEKlictwHltg8A7cmU3wPbM2BvYzFQSZOODdYxyvdB1kmhibD1jibd0JTS5P2yUsiajbBVZ0YiaibUvjA/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><p>扩展数据帧波形捕获</p><ul><li>END -</li></ul><h4 id="canopen学习" tabindex="-1"><a class="header-anchor" href="#canopen学习"><span>CANopen学习</span></a></h4><p>Object Dictionary（OD对象词典），对设备的操作基于OD dict；所有的参数、参数值和功能都是通过16位的index和8位sub-index组成的地址来访问和存取。通俗理解为CANopen通讯的地址</p><p>![[assets/Untitled.png|Untitled.png]]</p><p>CANopen网络中每个节点都有一个对象字典。对象字典包含了描述这个设备和它的网络行为的所有参数。<br> 一个节点的对象字典（包含通讯功能、通讯对象、与设备相关的对象以及对象的缺省值等）是在电子数据文档（EDS:Electronic Data Sheet）中描述或者记录在纸上。</p><p>CANopen对象词典的通用结构<br> 对象字典中描述通讯参数部分对所有CANopen设备（例如在OD中的对象是相同的，对象值不必一定相同）都是一样的。</p><p>COB-ID：只采用标准格式，包括Function ID和Node-ID</p><p>PDO：生产消费型</p><p>SDO：服务器客户端型；只有NMT主机能发起SDO通信</p><p>NMT</p><h5 id="nmt网络管理" tabindex="-1"><a class="header-anchor" href="#nmt网络管理"><span>NMT网络管理</span></a></h5><p>每个CANopen从节点的协议栈中，必须具备NMT管理的响应代码，这是节点具备CANopen协议的最基本的要素</p><p>NMT节点状态</p><ol><li><strong>初始化</strong>（Initializing）：节点上电后对功能部件包括 CAN 控制器进行初始化；</li><li><strong>应用层复</strong>位（Application Reset）：节点中的应用程序复位（开始），比如开关量输出、模拟量输出的初始值；</li><li><strong>通讯复位</strong>（Communication reset）：节点中的CANopen通讯复位（开始），从这个时刻起，此节点就可以进行CANopen通讯了。</li><li><strong>预操作状态</strong>（Pre-operational）：节点的CANopen通讯处于操作就绪状态，此时此节点不能进行PDO通信，而可以进行SDO进行参数配置和NMT网络管理的操作；</li><li><strong>操作状态</strong>（operational）：节点收到NMT主机发来的启动命令后，CANopen通讯被激活，PDO通信启动后，按照对象字典里面规定的规则进行传输，同样SDO也可以对节点进行数据传输和参数修改；</li><li><strong>停止状态</strong>（Stopped）：节点收到NMT主机发来的停止命令后，节点的PDO通信被停止，但SDO和NMT网络管理依然可以对节点进行操作；</li></ol><p>CANopen从站上线后，必须给NMT发送节点上线报文，ID为700h+Node-ID，数据为1个字节0</p><p>心跳报文为700h+Node-ID，数据为1个字节，代表节点目前的状态，04h为停止状态，05h为操作状态，7Fh为预操作状态；从站心跳时间存在EDS的1017h；主站按EDS的1006h的心跳时间进行检查。</p><p>节点守护和心跳报文二者不能并存，节点守护是问询式，且采用了远程帧发问，所以节点守护CIA不建议使用了</p><p>NMT节点状态切换命令：对网络进行管理CANID均为000h，具备最高的CAN优先级。数据为2个字节</p><p>第一字节代表命令类型</p><ol><li><strong>01****h</strong>为启动命令（让节点进入操作状态）；</li><li><strong>02****h</strong>为停止命令（让节点进入停止状态）；</li><li><strong>80****h</strong>为进入预操作状态（让节点进入预操作状态）；</li><li><strong>81****h</strong>为复位节点应用层（让节点的应用恢复初始状态，比如列车门都恢复打开状态）；</li><li><strong>82h</strong>为复位节点通讯（让节点的 CAN 和 CANopen 通讯重新初始化，一般用于总线收到干扰，导致节点总线错误被动，或者总线关闭时）。</li></ol><p>第二个字节代表被控制的节点Node-ID，如果要对整个网络的所有节点同时控制，则这个数值为0即可</p><h5 id="canopen主站设备" tabindex="-1"><a class="header-anchor" href="#canopen主站设备"><span>CANopen主站设备</span></a></h5><p>为了满足管理整个CANopen网络的从站设备，需要具备一下功能</p><ol><li>支持 PDO、SDO 发送与接收；</li><li>支持 NMT 网络管理；</li><li>支持 PDO 通信类型并能够支持监控每一个 PDO 目标；</li><li>LSS 层设置功能：从站波特率设置、从站节点编号设置；</li><li>支持从站管理功能：类型与名称读取、对象字典读写；</li><li>紧急报文发送功能；</li><li>扩展 CANopen 标准指示灯功能。</li></ol><h5 id="过程数据对象pdo-process-data-object" tabindex="-1"><a class="header-anchor" href="#过程数据对象pdo-process-data-object"><span>过程数据对象PDO（Process data object）</span></a></h5><p>PDO 属于过程数据用来传输实时数据，即单向传输，无需接收节点回应CAN 报文来确认，从通讯术语上来说是属于“生产消费”模型 PDO；</p><p>数据长度被限制为 1~8 字节。最多只要 1 帧就可以把一条信息或者一个变量传递结束。</p><p>而在 PDO 预定义中，人为规定了 TPDO 和 RPDO，规定了 Node-ID 在 PDO 中的位置，规定了 PDO 的编号。</p><p>![[assets/Untitled 1.png|Untitled 1.png]]</p><p>PDO的通信参数，定义了该设备所使用的 COB-ID、传输类型、定时周期等。RPDO 通讯参数位于对象字典索引的 1400h to 15FFh，TPDO 通讯参数位于对象字典索引的 1800h to19FFh。每条索引代表一个 PDO 的通信参数集，其中的子索引分别指向具体的各种参数。如表 7.2 所示。</p><p>![[assets/Untitled 2.png|Untitled 2.png]]</p><ol><li>Number of entries 参数条目数量：即本索引中有几条参数；</li><li>COB-ID：即这个 PDO 发出或者接收的对应 CAN 帧 ID；</li><li>发送类型：即这个 PDO 发送或者接收的传输形式，通常使用循环同步和异步制造商特定事件较多；</li><li>Inhibit time 生产禁止约束时间(1/10ms)：约束 PDO 发送的最小间隔，避免导致总线负载剧烈增加，比如数字量输入过快，导致状态改变发送的 TPDO 频繁发送，总线负载加大，所以需要一个约束时间来进行“滤波”，这个时间单位为 0.1ms；</li><li>Event timer 事件定时器触发的时间(单位 ms)：定时发送的 PDO，它的定时时间，如果这个时间为 0，则这个 PDO 为事件改变发送。</li><li>SYNC start value 同步起始值：同步传输的 PDO，收到诺干个同步包后，才进行发送，这个同步起始值就是同步包数量。比如设置为 2，即收到 2 个同步包后才进行发送。</li></ol><p>PDO 映射参数是初学者学习 CANopen 时的一个难点，它包含了一个对象字典中的对象列表，这些对象映射到相应的 PDO，其中包括数据的长度（单位，位），对于生产者和消费者都必须要知道这个映射参数，才能够正确的解释 PDO 内容。就是将通信参数、应用数据和具体 CAN 报文中数据联系起来。</p><p>RPDO 通讯参数 1400h to 15FFh，映射参数 1600h to 17FFh，数据存放为 2000h 之后厂商自定义区域；TPDO 通讯参数 1800h to 19FFh，映射参数 1A00h to 1BFFh，数据存放为 2000h 之后厂商自定义区域。</p><h5 id="服务数据对象-sdo-service-data-object" tabindex="-1"><a class="header-anchor" href="#服务数据对象-sdo-service-data-object"><span>服务数据对象 SDO（Service data object）</span></a></h5><p>SDO主要用于CANopen主站对从节点的参数配置。==服务确认==是SDO的最大的特点，为每个消息都生成一个应答，确保数据传输的准确性。</p><p>在一个CANopen系统中，通常CANopen从节点作为SDO服务器，CANopen主节点作为客户端。SDO客户端通过所以和子索引，能够访问SDO服务器上的对象字典。这样CANopen主节点可以访问从节点的任意对象字典项的参数，并且SDO也可以传输任何长度的数据（当数据长度 超过4个字节时就拆分成多个报文来传输）。</p><p>SDO 的通讯原则非常单一，发送方（客户端）发送 CAN-ID 为 600h+Node-ID 的报文，其中 Node-ID 为接收方（服务器）的节点地址，数据长度均为 8 字节；</p><p>接收方（服务器）成功接收后，回应 CAN-ID 为 580h+Node-ID 的报文。这里的 Node-ID依然是接收方（服务器）的节点地址，数据长度均为 8 字节。</p><p>==<strong>快速SDO协议（Expedited SDO protocol）</strong>==是最常见的SDO协议，所谓快速，就是1个来回就搞定。前提是读取和写入的值不能大于32位。命令中直接包含了要读写的索引、子索引、数据。可谓直接命中。</p><p>![[assets/Untitled 3.png|Untitled 3.png]]</p><p>通过快速 SDO，可以直接对 CANopen 节点的对象字典中的值进行读取和修改，所以在 做参数配置之外，也经常作为关键性数据传输之用。比如 CANopen 控制机器人的电机转动<br> 角度时，就使用 SDO 来传输，保证可靠到达。</p><p>==<strong>普通SDO协议（Normal SDO protocol）</strong>==，当需要传输的值==超过 32 位==时，就不能使用快速 SDO 传输。必须使用普通 SDO 进行分帧传输。在应用中==较少用到==，==一般用于 CANopen 节点的程序固件升级==，或者做网关转换MVB 总线之类数据最大可达 256 位的应用。</p><p>普通SDO协议难点在于分包逻辑与CS命令符的变化（具体见图）。普通SDO的CAN帧ID与快速SDO相同，依然发送方（客户端）发送的报文CAN-ID为600h+Node-ID，接收方（服务器）成功接收后，回应CAN-ID为580h+Node-ID的报文。</p><h5 id="特殊协议-special-protocols" tabindex="-1"><a class="header-anchor" href="#特殊协议-special-protocols"><span>特殊协议（Special protocols）</span></a></h5><p>==<strong>同步协议（Sync protocol）</strong>==：主要实现整个网络的同步传输，每个节点都以该同步报文作为 PDO 触发参数，因此该同步报文的 COB-ID 具有比较高的优先级以及最短的传输时间。 一般选用 80h作为同步报文的 CAN-ID，</p><p>一般同步报文由 NMT 主机发出，CAN 报文的数据为 0 字节。但如果一个网络内有 2 个同步机制，就需要设置不同的同步节拍，比如某些节点按 1 个同步帧发送 1 次 PDO，其 他的节点收到2个同步帧才发送1此PDO，所以这里PDO参数中的同步起始值就起了作用。</p><p>在同步协议中，有 2 个约束条件：</p><ul><li><strong>同步窗口时间</strong>：索引 1007h约束了同步帧发送后，从节点发送 PDO 的时效，即在这个时间内发送的 PDO 才有效，超过时间的 PDO 将被丢弃；</li><li><strong>通讯循环周期</strong>：索引 1006h规定了同步帧的循环周期。</li></ul><p>==<strong>时间戳协议（Time-stamp protocol）</strong>==：NMT主机发送自身的时钟，为网络各个节点提供公共的时间参考，即网络对时，这在故障诊断中非常需要，比如列车中火灾报警，检修人员需要朱雀获知报警的时刻，然后关联查看其他设备在这个时刻的工作状态。</p><p>时间戳协议采用广播方式，无需节点应答，CAN-ID 为 100h，数据长度为 6，数据为当 前时刻与 1984 年 1 月 1 日 0 时的时间差。如图 9.4 所示。节点将此时间存储在对象字典 1012h 的索引中。</p><p>==<strong>紧急报文协议（Emergency protocol）</strong>==：</p><p>紧急事件对象（Emergency），是当设备内部发生错误，触发该对象，发送设备内部错误代码，提示 NMT 主站。紧急报文属于诊断性报文，一般不会影响 CANopen 通讯，其 CAN-ID存储在 1014h的索引中，一般会定义为 080h +node-ID，数据包含 8 个字节。其中包括 EEC：紧急时间错误代码，ER：错误寄存器，MEF：厂商自定义的错误代码。</p><h4 id="can收发器选型" tabindex="-1"><a class="header-anchor" href="#can收发器选型"><span>CAN收发器选型</span></a></h4><p>CAN唤醒域诊断</p><blockquote><p>[!info] CAN(FD)收发器选型及替换指南(一)_常见的多通道can收发器_Auto FAE进阶之路的博客-CSDN博客<br> 本文主要介绍了主流厂家的CAN收发器及其相关特点_常见的多通道can收发器<br><a href="https://blog.csdn.net/bjxdbz/article/details/124435638?ops_request_misc=%7B%22request%5Fid%22%3A%22169206830916800192241737%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fblog.%22%7D&amp;request_id=169206830916800192241737&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-124435638-null-null.268%5Ev1%5Ekoosearch&amp;utm_term=CAN&amp;spm=1018.2226.3001.4450" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/bjxdbz/article/details/124435638?ops_request_misc=%7B%22request%5Fid%22%3A%22169206830916800192241737%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fblog.%22%7D&amp;request_id=169206830916800192241737&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-124435638-null-null.268^v1^koosearch&amp;utm_term=CAN&amp;spm=1018.2226.3001.4450</a></p></blockquote><blockquote><p>[!info] CAN(FD)收发器选型及替换指南(二)_tja1443_Auto FAE进阶之路的博客-CSDN博客<br> 本文主要介绍了几家主流CAN收发器的替换注意事项_tja1443<br><a href="https://blog.csdn.net/bjxdbz/article/details/124435792?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=CAN%E6%94%B6%E5%8F%91%E5%99%A8%E9%80%89%E5%9E%8B&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-124435792.142%5Ev92%5EcontrolT0_2&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/bjxdbz/article/details/124435792?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=CAN收发器选型&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-124435792.142^v92^controlT0_2&amp;spm=1018.2226.3001.4187</a></p></blockquote><blockquote><p>[!info] TJA1043高速CAN收发器<br> 恩智浦的TJA1043是一款具有故障安全和诊断功能的高速CAN收发器，可提供增强的系统可靠性和高级电源管理。<br><a href="https://www.nxp.com.cn/products/interfaces/can-transceivers/can-with-flexible-data-rate/high-speed-can-transceiver-with-standby-and-sleep-mode:TJA1043" target="_blank" rel="noopener noreferrer">https://www.nxp.com.cn/products/interfaces/can-transceivers/can-with-flexible-data-rate/high-speed-can-transceiver-with-standby-and-sleep-mode:TJA1043</a></p></blockquote><blockquote><p>[!info] 车载通信——CAN收发器选型（低功耗）_汽车人——EEA的博客-CSDN博客<br> 车载通信——CAN收发器选型（低功耗）<br><a href="https://blog.csdn.net/weixin_64064747/article/details/128076259?ops_request_misc=%7B%22request%5Fid%22%3A%22169206723316800188584636%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169206723316800188584636&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-128076259-null-null.142%5Ev92%5EcontrolT0_2&amp;utm_term=CAN%E6%94%B6%E5%8F%91%E5%99%A8%E9%80%89%E5%9E%8B&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_64064747/article/details/128076259?ops_request_misc=%7B%22request%5Fid%22%3A%22169206723316800188584636%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169206723316800188584636&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-128076259-null-null.142^v92^controlT0_2&amp;utm_term=CAN收发器选型&amp;spm=1018.2226.3001.4187</a></p></blockquote><blockquote><p>[!info] CAN收发器几种典型工作模式简介_碉堡大叔的博客-CSDN博客<br> 如上图1所示，当CAN总线的两个差分线重合于1/2VCC时，此处以5V供电的CAN收发器为例说明，这个状态对应着逻辑数据的1，这称之为隐性状态电平，与此相反，当两个差分线的电压分离开来时，如上图中所示，CANH为3.5V,CANL为1.5V时，则逻辑数据为0，这称之为显性状态电平。第三种工作模式，是静默模式，当STBY和NSIL这两个pin都是低电平时，芯片进入静默模式，在此模式下，CAN收发器只能接收数据，不能发送数据。总线电压是偏置在1/2VCC电压上的，它同时具有欠压检测的功能，我们后续会进行分析。_can收发器<br><a href="https://blog.csdn.net/weixin_39196333/article/details/131381994?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169206886016800225585553%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169206886016800225585553&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-131381994-null-null.142%5Ev92%5EcontrolT0_2&amp;utm_term=CAN%E6%94%B6%E5%8F%91%E5%99%A8%20%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F&amp;spm=1018.2226.3001.4187" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_39196333/article/details/131381994?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169206886016800225585553%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169206886016800225585553&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-131381994-null-null.142^v92^controlT0_2&amp;utm_term=CAN%E6%94%B6%E5%8F%91%E5%99%A8%20%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F&amp;spm=1018.2226.3001.4187</a></p></blockquote><blockquote><p>[!info] TJA1403状态模式_tja1043 休眠唤醒的原理_西北风加冰棍的博客-CSDN博客<br> 正常模式在正常模式下，收发器可以通过总线CANH和CANL发送和接收数据。 差分接收器将总线上的模拟数据转换为数字数据，然后输出到RXD引脚。 控制和优化总线上的输出信号的斜率，以确保最低的EME。 总线引脚偏置到0.5VCC（通过Ri）。 INH引脚有效，因此由INH引脚控制的稳压器（见图7）也将处于活动状态。监听模式在监听模式下，收发器的发送器被禁用，收发器提供了有效的监听功能。 接收..._tja1043 休眠唤醒的原理<br><a href="https://blog.csdn.net/weixin_37798622/article/details/104258830" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_37798622/article/details/104258830</a></p></blockquote><blockquote><p>[!info] TJA1043收发器信息梳理<br> TJA1043收发器信息梳理对于汽车控制器开发工程师来说，CAN收发器是一个常用的芯片，之前分享过一篇TJA1145的文章，今天来分享一篇TJA1043。 01. TJA1043简介 TJA1043是NXP的第三代高速CAN收发器，与第二代相比，改…<br><a href="https://zhuanlan.zhihu.com/p/620626396" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/620626396</a></p></blockquote><blockquote><p>[!info] 电子技术（二十四）——CAN唤醒<br> 一、简介汽车上有许多的ECU节点，如果ignition On时所有ECU都正常工作会导致电池的无用消耗。为了更好的去利用整车的能源，防止出现不必要的电池浪费，网络管理（Network Management，以下简称NM）便可以很好的解…<br><a href="https://zhuanlan.zhihu.com/p/531443584" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/531443584</a></p></blockquote><p>TJA1145除了支持以上两种Can Transceiver的主要功能外还支持设定唤醒CAN报文，即只有设定的合法CAN报文才可以唤醒收发器。</p><blockquote><p>[!info] 基于CAN的ECU唤醒流程<br> 本文主要介绍ECU从睡眠状态，如何被CAN报文唤醒。<br><a href="https://mp.weixin.qq.com/s/5DqBGi6NbsWTT5p4eAm0fg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/5DqBGi6NbsWTT5p4eAm0fg</a></p></blockquote><blockquote><p>[!info] 车载控制器CAN唤醒以及休眠机制<br> undefined<br><a href="https://mp.weixin.qq.com/s/ALI4jGBRtHYjQVCV7HmrVQ" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/ALI4jGBRtHYjQVCV7HmrVQ</a></p></blockquote><p>[[CAN收发器选型]]</p><p>[[深入浅出讲解CAN总线]]</p><h3 id="can设备及服务提供商" tabindex="-1"><a class="header-anchor" href="#can设备及服务提供商"><span>CAN设备及服务提供商</span></a></h3><blockquote><p>[!info] 珠海创芯科技有限公司<br> 专业提供CAN总线解决方案<br><a href="https://www.zhcxgd.com/" target="_blank" rel="noopener noreferrer">https://www.zhcxgd.com/</a></p></blockquote><p><a href="https://www.bilibili.com/video/BV1NZ4y1z7zu/" target="_blank" rel="noopener noreferrer">CANopen是什么？ CANopen通讯基础（上）</a></p><p><a href="https://www.bilibili.com/video/BV1dX4y157ot/" target="_blank" rel="noopener noreferrer">最清晰的CANOPEN 入门介绍</a></p><p><a href="https://www.eefocus.com/article/449975.html#:~:text=CAN%20%E6%80%BB%E7%BA%BF%E7%9A%84%E5%87%BA%E7%8E%B0%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E5%90%84%E8%8A%82%E7%82%B9%E4%B9%8B%E9%97%B4%E5%AE%9E%E6%97%B6%E3%80%81%E5%8F%AF%E9%9D%A0%E7%9A%84%20%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%20%E6%8F%90%E4%BE%9B%E4%BA%86%E5%BC%BA%E6%9C%89%E5%8A%9B%E7%9A%84%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81%EF%BC%8C%E5%9C%A8%E5%B8%A6%E6%9D%A5%E4%BE%BF%E5%88%A9%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E4%B9%9F%E4%B8%BA%E5%B7%A5%E7%A8%8B%E5%B8%88%E4%BB%AC%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%A2%9E%E5%8A%A0%E4%BA%86%E9%9A%BE%E5%BA%A6%EF%BC%8C%E6%89%80%E4%BB%A5%E6%9C%AC%E6%96%87%E4%B8%BB%E8%A6%81%E7%BB%99%E5%A4%A7%E5%AE%B6%E4%BB%8B%E7%BB%8D%E4%BA%86%E6%89%BE%E5%88%B0%20CAN%20%E6%80%BB%E7%BA%BF%EF%BC%88%E6%95%85%E9%9A%9C%EF%BC%89%E8%8A%82%E7%82%B9%E7%9A%84%E4%B8%89%E7%A7%8D%E5%8A%9E%E6%B3%95%E3%80%82%201%E3%80%81%20%E5%B0%86%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9%E9%83%BD%E6%8B%94%E6%8E%89%EF%BC%8C%E4%BE%9D%E6%AC%A1%E5%BE%80%E4%B8%8A%E6%8E%A5%E3%80%82,%E5%BD%93%20CAN%20%E6%80%BB%E7%BA%BF%E5%87%BA%E7%8E%B0%E6%95%85%E9%9A%9C%E5%90%8E%E5%B0%86%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9%E9%83%BD%E6%8B%94%E6%8E%89%EF%BC%8C%E4%B9%8B%E5%90%8E%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E5%BE%80%E4%B8%8A%E6%8E%A5%EF%BC%8C%E6%8E%A5%E5%88%B0%E7%B3%BB%E7%BB%9F%E5%87%BA%E9%94%99%E6%97%B6%EF%BC%8C%E5%8D%B3%E6%89%BE%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E6%8F%92%E5%85%A5%E8%8A%82%E7%82%B9%E4%B8%BA%E6%95%85%E9%9A%9C%E8%8A%82%E7%82%B9%E3%80%82%20%E5%A6%82%E4%B8%8B%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E5%9B%BE%201%20%E4%B8%BA%E6%96%B0%E8%83%BD%E6%BA%90%E8%BD%A6%20%E6%8E%A7%E5%88%B6%E6%80%BB%E7%BA%BF%20%EF%BC%8C%E8%BD%A6%E8%BE%86%E5%90%AF%E5%8A%A8%E5%90%8E%E4%BB%AA%E8%A1%A8%E6%98%BE%E7%A4%BA%E6%BB%9E%E5%90%8E%EF%BC%8C%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E3%80%82" target="_blank" rel="noopener noreferrer"><strong>找到CAN总线（故障）节点的三种办法</strong></a></p><p><a href="https://community.sslcode.com.cn/648674ef55c3e102e65f8efe.html?dp_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MzMwMDg3NSwiZXhwIjoxNjkyODcyMzY3LCJpYXQiOjE2OTIyNjc1NjcsInVzZXJuYW1lIjoid2VpeGluXzQwMzEwOTg2In0.XsgDwTpKdUVqNuqddgKSE0LmjxJkfAKR2TcDRZ0_N-c" target="_blank" rel="noopener noreferrer">秀！靠这篇我竟然2天理解了CAN协议！实战STM32F4 CAN！_Wireless_Link-松山湖开发者村综合服务平台 (sslcode.com.cn)</a></p><p><a href="https://zhuanlan.zhihu.com/p/346696648" target="_blank" rel="noopener noreferrer">CAN总线原理-精华整理 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/lamanchas/article/details/121880449?spm=1001.2101.3001.6650.7&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-121880449-blog-80568338.235%5Ev38%5Epc_relevant_anti_t3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-121880449-blog-80568338.235%5Ev38%5Epc_relevant_anti_t3&amp;utm_relevant_index=14" target="_blank" rel="noopener noreferrer">车载网络结构（车内）-基础概念_车内网_picoasis的博客-CSDN博客</a></p><p><a href="https://www.zhihu.com/column/c_194389050" target="_blank" rel="noopener noreferrer">汽车CAN总线 - 知乎 (zhihu.com)</a></p><p><a href="https://www.zlg.cn/index.php/can/down/down/id/37.html" target="_blank" rel="noopener noreferrer">串口转CAN模块-广州致远电子股份有限公司 (zlg.cn)</a></p><p><a href="https://www.zhihu.com/tardis/zm/art/180515614?source_id=1005" target="_blank" rel="noopener noreferrer">CAN总线学习资源汇总 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/30247549" target="_blank" rel="noopener noreferrer">如何学习CAN总线？ - 知乎 (zhihu.com)</a></p><p><a href="https://wenku.baidu.com/view/9ed0b9adbf23482fb4daa58da0116c175f0e1eae?aggId=c99397ec551810a6f52486a1&amp;fr=catalogMain_text_ernie_recall_backup_new%3Awk_recommend_main3&amp;_wkts_=1686674309930" target="_blank" rel="noopener noreferrer">上海大众帕萨特CAN数据总线的结构原理 - 百度文库 (baidu.com)</a></p><p><a href="https://blog.csdn.net/weixin_49336610/article/details/128882788" target="_blank" rel="noopener noreferrer">(191条消息) 手把手教会你CAN原理和电路设计_can电路_硬件工程师老刘的博客-CSDN博客</a></p><p><a href="https://zhuanlan.zhihu.com/p/611858237" target="_blank" rel="noopener noreferrer">CAN总线电路设计原理图 - 知乎 (zhihu.com)</a></p><p><a href="https://www.elecfans.com/emb/jiekou/20180507673487.html" target="_blank" rel="noopener noreferrer">CAN总线通信典型电路原理图（四款CAN总线通信电路原理图分享） - 接口/总线/驱动 - 电子发烧友网 (elecfans.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/589383877" target="_blank" rel="noopener noreferrer">【技术分享】CAN总线接口保护电路设计指南 - 知乎 (zhihu.com)</a></p><p>底层协议</p><p>上层协议</p><p><a href="https://www.can-cia.org/" target="_blank" rel="noopener noreferrer">canopen官网</a></p><ul><li><p><a href="https://canfestival.org/" target="_blank" rel="noopener noreferrer">CANfestival</a></p><p>SAE J1939/ISO11783、CANOpen、CANaerospace、DeviceNet、NMEA 2000等。</p></li></ul><p>CAN 系统除了广泛应用于民用车辆外，CAN 系统也广泛应用在军用车辆上。</p><p>在 1999 年，MilCAN 工作组开始筹划一个高层协议以便在 CANbus 总线的基础上扩展其应用，同时注重规范 CAN 系统在军用系统内的应用。</p><p>MilCAN 最初是在军事陆用系统中使用，这个工作组建议该系统可用于 ‘任何需要确定性数据传输的地方’，即装甲车辆。</p><p>军用需求在一些方面与民用需求有所不同。首先，数据传输需要更确定，错误处理和适应性更重要。军用车辆常常在恶劣的运行环境中操作，而军用车辆的使用寿命通常远远长于类似的民用车辆（20 年到 30 年的保养、改装和升级都是常态）。</p><p>MilCAN 作为一个软件产品，可被装入任何支持标准 CAN 的设备上而无需特别的硬件。 Kvaser 的标准产品在多数情况下适合军事/防务应用，同时它们坚固耐用的特性尤其适用于军事领域常见的恶劣运行环境。</p><p>CAN系统在农林车辆上的应用</p><p>成立于 2008 年的农业电器协会（AEF）在各种农业车辆设备通讯适配器标准化方面发挥了关键作用。AEF 主要贡献是在 ISO 11783 标准上，此标准又名为 ‘拖拉机和农林业车辆 — 系列控制和通讯数据网’, 常常被称为 ISO Bus 或者 ISOBUS。</p><p>在SAE J1939协议的基础上，ISO 11783 定义了农业车辆操作和控制的通讯协议，而 SAE J1939 协议是基于 CAN（控制器局域网）总线协议。支持ISOBUS 协议的机械设备可直接联接到拖拉机的控制网上，从而可以由驾驶舱的单一控制终端操作控制。这提供了与车载系统更佳的协同合作，如 GPS 和精准的农用数据。</p><p>与 CAN 系统辅助汽车技师读取诊断错误报文相似，现在农用车辆技师可以在拖拉机上做同样的操作。除了这个基本应用，这项技术还能让用户监测、捕捉和分析各种数据，如有关燃料消耗、里程读数、待机和运行时间比，以及很多其他效率参数和功能。这些数据可用来扩展车辆的应用能力，改善车辆功能、效率，以及为农场主降低运行费用。</p><p>J1939 接头在农业车辆中使用普遍。J1939-13车载诊断接头用来与各种农业车辆机器接入通讯。 Kvaser’s Leaf Light HS v2 J1939-13 Type II 诊断接头尤其适合农业环境，因为它的绝缘安装能抵御电压上升和电击。</p><h1 id="近场" tabindex="-1"><a class="header-anchor" href="#近场"><span>近场</span></a></h1><h2 id="wifi" tabindex="-1"><a class="header-anchor" href="#wifi"><span>WIFI</span></a></h2><p>通讯 一次把WiFi原理、WiFi芯片和开源芯片openwifi说透！ 项目网址：<a href="https://github.com/open-sdr/openwifi" target="_blank" rel="noopener noreferrer">https://github.com/open-sdr/openwifi</a><br> 完整会议录像：<a href="https://meetings.feishu.cn/minutes/obcn5ifc436pci1ntd1o5u9q" target="_blank" rel="noopener noreferrer">https://meetings.feishu.cn/minutes/obcn5ifc436pci1ntd1o5u9q</a></p><ul><li><p>WiFi基本概念</p></li><li><p>openwifi总体架构以及组成模块介绍</p></li><li><p>openwifi的诞生、定位以及横向对比</p></li><li><p>openwifi科研应用:无线感知、无线通信、无线安全</p></li><li><p>openwifi开发进展和路线图</p></li><li><p>openwifi开源License选择与可持续发展</p></li><li><p>回应质疑</p></li></ul><h2 id="ble" tabindex="-1"><a class="header-anchor" href="#ble"><span>BLE</span></a></h2><h2 id="nfc" tabindex="-1"><a class="header-anchor" href="#nfc"><span>NFC</span></a></h2><p><a href="https://www.bilibili.com/medialist/play/watchlater/BV17341187iE" target="_blank" rel="noopener noreferrer">手机NFC到底如何使用？怎么才可以复制加密门禁卡？为什么不能直接复制？</a></p><h2 id="uwb" tabindex="-1"><a class="header-anchor" href="#uwb"><span>UWB</span></a></h2><h2 id="zigbee" tabindex="-1"><a class="header-anchor" href="#zigbee"><span>ZigBee</span></a></h2><h1 id="iot" tabindex="-1"><a class="header-anchor" href="#iot"><span>IOT</span></a></h1><h2 id="_4g-5g" tabindex="-1"><a class="header-anchor" href="#_4g-5g"><span>4G/5G</span></a></h2><h2 id="nb-iot" tabindex="-1"><a class="header-anchor" href="#nb-iot"><span>NB-IOT</span></a></h2><h2 id="lora" tabindex="-1"><a class="header-anchor" href="#lora"><span>Lora</span></a></h2><p><a href="https://zhuanlan.zhihu.com/p/313035354" target="_blank" rel="noopener noreferrer">Lora无线技术原理及优缺点</a><a href="https://zhuanlan.zhihu.com/p/390261421" target="_blank" rel="noopener noreferrer">物联网Lora技术应用有哪些？Lora无线通讯模块有什么优缺点</a></p><h2 id="eth" tabindex="-1"><a class="header-anchor" href="#eth"><span>ETH</span></a></h2><p><a href="https://www.bilibili.com/video/BV1f54y117E1" target="_blank" rel="noopener noreferrer">LWIP以太网芯片手册阅读</a></p><h2 id="电力电子" tabindex="-1"><a class="header-anchor" href="#电力电子"><span>电力电子</span></a></h2><h1 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h1><h2 id="传感器" tabindex="-1"><a class="header-anchor" href="#传感器"><span>传感器</span></a></h2><p>DHT11 SHT11 DS18B20</p><h2 id="红外线" tabindex="-1"><a class="header-anchor" href="#红外线"><span>红外线</span></a></h2><p>NEC</p><h2 id="音频" tabindex="-1"><a class="header-anchor" href="#音频"><span>音频</span></a></h2><p>I2S</p><h2 id="存储" tabindex="-1"><a class="header-anchor" href="#存储"><span>存储</span></a></h2><p>SD_SPI SD_SD</p><h2 id="航模" tabindex="-1"><a class="header-anchor" href="#航模"><span>航模</span></a></h2><p>SBUS sbus和PWM相比，SBUS在使用多个多级时有利于布线，但是响应速度比不过PWM，SBUS响应速度3ms，而PWM可以做到1MS</p><h1 id="待整理" tabindex="-1"><a class="header-anchor" href="#待整理"><span>待整理</span></a></h1><p><a href="https://www.bilibili.com/video/BV1sa411H7Hy/" target="_blank" rel="noopener noreferrer">如何从0设计一个通信协议（协议边界问题、协议序列化、工程实践） |</a><a href="https://mp.weixin.qq.com/s/H9AI4z_f-KDeGD1XWMWgEA" target="_blank" rel="noopener noreferrer">SPI、I2C、UART、I2S、GPIO、SDIO、CAN，你能分清楚吗？ (qq.com)</a><a href="https://zhuanlan.zhihu.com/p/452881964" target="_blank" rel="noopener noreferrer">常见硬件通信(SPI、I2C、CAN、USB、UART)协议介绍</a><a href="https://www.bilibili.com/video/BV1ju411W7Q3/" target="_blank" rel="noopener noreferrer">【蛋饼嵌入式】嵌入式通信的底层逻辑（上）—— 弄懂UART I2C SPI CAN LIN 和 ETH的内在联系</a> [SPI、UART、RS232、RS485、IIC 5种嵌入式经典通信总线协议精讲](</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-10-15T14:39:21.000Z" data-allow-mismatch>2025/10/15 14:39</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mlh18@qq.com">malihang</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: mlh18@qq.com">PC-20250430KOXD\Administrator</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/study-notes/assets/js/runtime~app.f0efdb6e.js" defer></script><script src="/study-notes/assets/js/6036.7d799e3b.js" defer></script><script src="/study-notes/assets/js/app.c05956ee.js" defer></script>
  </body>
</html>
