<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>LiZhou 学习笔记</title><meta name="description" content="LiZhou Study Notes">
    <link rel="stylesheet" href="/study-notes/assets/css/styles.eff80740.css">
    <link rel="preload" href="/study-notes/assets/js/runtime~app.54772a73.js" as="script"><link rel="preload" href="/study-notes/assets/css/styles.eff80740.css" as="style"><link rel="preload" href="/study-notes/assets/js/6036.7d799e3b.js" as="script"><link rel="preload" href="/study-notes/assets/js/app.459e885f.js" as="script">
    <link rel="prefetch" href="/study-notes/assets/js/Base_01_Math.html.c721fa92.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_03_永磁10讲.html.9be16e1b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_01_Base.html.098e310c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_020_weidongshan.html.59ce0b49.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ST.html.e4c2fe44.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Career.html.76fd4459.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_10_FOC.html.d494d49d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_021_Algorithms.html.17536f51.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Robot.html.20b6ebdd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Protocol.html.be74ffaf.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_011_FreeRTOS.html.2c4f7466.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Electronics.html.a6bb75a2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_013_Linux.html.256c81fa.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ESPRESSIF.html.f56f20f2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Car.html.1445925c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_PCB.html.1e521b7e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Tool.html.22f0a8d5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Circuit.html.29cff5f8.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_AI.html.bc600b38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_010_VersionControlSystem.html.aedcc3b1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_01_Design.html.72a9d9c7.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_004_Matlab.html.458205d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_00_Motor.html.13c6e4dd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_03_mechanics.html.6ae4e01e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_51.html.c5bc6ef9.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_02_CAX.html.e88788d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_IOT.html.2eccc1d6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_SLAM.html.93745467.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Log.html.25f91089.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_11_TIMER.html.4eb05f50.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_04_TOOL.html.7ca81261.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Video.html.c905d2ed.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Raspberry Pi.html.7fefb830.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_009_DevTool.html.1ad809b4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_012_RT-Thread.html.9991ddbe.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Audio.html.fad407ae.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_06_Electronics.html.3b938fe5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Storage.html.1fcdef3f.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_02_Physics.html.f88771d3.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_001_OS.html.ebd9a416.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_03_DDC.html.fdb945eb.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_ElectricalEnergy.html.5fe5928a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_001_C.html.45e15f26.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_TechnologyCollection.html.a0849c1c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Arduino.html.d0840f6e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_022_DesignMode.html.f7667801.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_IC.html.3a3ff3f5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Canaan.html.22ca4853.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/get-started.html.4895b3af.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Database.html.e3e355d4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_20_MC_FOC.html.3a828c2b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Board.html.dc51ff11.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_002_Python.html.d5a21fd2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_index.html.472a6d77.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Secure.html.de1ee739.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_020_ComputerSystem.html.094362f1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_other.html.ecd4d1d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_003_Rust.html.7d7d6d17.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Armarium.html.edcc7208.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/index.html.4a5d0a5a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Infineon.html.40e7fec6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_index.html.87ac7181.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_index.html.0995e034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Virtual.html.f7474034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_014_openharmory.html.8eed78cd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Consumption.html.caeeff5d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_OTA.html.3d12318a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_30_HW.html.25d871be.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_04_Control.html.05fa9682.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/404.html.b06b23c6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/study-notes/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="LiZhou 学习笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">LiZhou 学习笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://vuejs.press/zh/" aria-label="VuePress" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->VuePress<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://vuejs.press/zh/" aria-label="VuePress" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->VuePress<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Embeded <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Code <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/001_C.html" aria-label="C"><!--[--><!--[--><!--]--><!--]-->C<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/002_Python.html" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/003_Rust.html" aria-label="Rust"><!--[--><!--[--><!--]--><!--]-->Rust<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/004_Matlab.html" aria-label="Matlab"><!--[--><!--[--><!--]--><!--]-->Matlab<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/009_DevTool.html" aria-label="开发工具"><!--[--><!--[--><!--]--><!--]-->开发工具<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/010_VersionControlSystem.html" aria-label="版本管理"><!--[--><!--[--><!--]--><!--]-->版本管理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/020_ComputerSystem.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/021_Algorithms.html" aria-label="算法"><!--[--><!--[--><!--]--><!--]-->算法<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/022_DesignMode.html" aria-label="设计模式"><!--[--><!--[--><!--]--><!--]-->设计模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Motor <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/00_Motor.html" aria-label="电机教程"><!--[--><!--[--><!--]--><!--]-->电机教程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/01_Base.html" aria-label="电磁基础"><!--[--><!--[--><!--]--><!--]-->电磁基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/03_%E6%B0%B8%E7%A3%8110%E8%AE%B2.html" aria-label="永磁10讲"><!--[--><!--[--><!--]--><!--]-->永磁10讲<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/10_FOC.html" aria-label="FOC"><!--[--><!--[--><!--]--><!--]-->FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/11_TIMER.html" aria-label="定时器"><!--[--><!--[--><!--]--><!--]-->定时器<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/20_MC_FOC.html" aria-label="MC_FOC"><!--[--><!--[--><!--]--><!--]-->MC_FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/30_HW.html" aria-label="电机硬件"><!--[--><!--[--><!--]--><!--]-->电机硬件<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><p><a href="https://www.bilibili.com/video/BV1qr4y1w7y9" target="_blank" rel="noopener noreferrer">TCP/IP让“掌机”成为智能中控中心，详解Wio Terminal联网</a><a href="https://www.bilibili.com/video/BV19p4y1a7Kb" target="_blank" rel="noopener noreferrer">STM32CUBEMX-TCP服务器搭建</a></p><p><a href="https://doc.openluat.com/wiki/21?wiki_page_id=2595" target="_blank" rel="noopener noreferrer">Luat社区</a></p><h4 id="物联网" tabindex="-1"><a class="header-anchor" href="#物联网"><span>物联网</span></a></h4><p><a href="https://www.bilibili.com/video/BV1CJ411w7bQ/" target="_blank" rel="noopener noreferrer">【全部开源】微信小程序连接阿里云物联网平台控制esp8266驱动</a></p><p><a href="https://zhuanlan.zhihu.com/p/27348768" target="_blank" rel="noopener noreferrer">不要被手机信号格骗了！看信号强弱的正确方法是……</a><a href="http://www.wklken.me/posts/2011/12/10/python-ftp-ftplib.html" target="_blank" rel="noopener noreferrer">蟒实现FTP常用操作[FTPLIB]</a></p><p><a href="https://www.bilibili.com/video/BV1j54y117nC" target="_blank" rel="noopener noreferrer">【小熊派Cat-1网卡】掏出抽屉里吃灰的cat-1裹上面包糠......</a><a href="https://www.bilibili.com/medialist/play/watchlater/BV1Qq4y1w7F5" target="_blank" rel="noopener noreferrer">【硬核】公网访问？内网穿透！零经验上手</a><a href="https://blog.csdn.net/ZHONGCAI0901/article/details/109579940" target="_blank" rel="noopener noreferrer">【FreeRTOS】基于STM32移植LWIP 2.1.2详细步骤</a><br><a href="http://bbs.yeelink.net/forum.php?mod=viewthread&amp;tid=173&amp;page=1&amp;extra=" target="_blank" rel="noopener noreferrer">Yeelink 论坛 - Yeelink交流 开源硬件 Arduino 树莓派 物联网 BBS</a><a href="https://www.bilibili.com/video/BV1pv411r7Cv/" target="_blank" rel="noopener noreferrer">【太极创客】零基础入门学用物联网 - MQTT篇 1-2 MQTT基本原理</a><a href="https://gitee.com/openLuat/X-MagicBox-820/blob/master/doc/README.md" target="_blank" rel="noopener noreferrer">doc/README.md · 合宙Luat/820开发板 - Gitee.com</a></p><h5 id="mqtt" tabindex="-1"><a class="header-anchor" href="#mqtt"><span>MQTT</span></a></h5><p>MQTT通信有两个最为重要的角色：MQTT服务端、MQTT客户端；信息发布者、信息订阅者，两个可重叠</p><p>MQTT主题 是 信息的标签</p><p><strong>MQTT 发布/订阅 特性：相互可独立、空间可分离、时间可异步</strong></p><h6 id="mqtt客户端连接服务器的两步" tabindex="-1"><a class="header-anchor" href="#mqtt客户端连接服务器的两步"><span>MQTT客户端连接服务器的两步：</span></a></h6><ol><li><p>MQTT客户端将会向服务端发送连接请求，该请求实际上是一个包含有连接请求信息的数据包。这个数据包的官方名称为<strong>CONNECT</strong></p><p>CONNECT报文内容：</p><ol><li><strong>clientId – 客户端ID-用该标识来识别客户端</strong></li><li><strong>cleanSession – 清除会话-发送失败后是否保存未成功接收的报文，设置为False的同时QOS级别应大于0</strong></li><li><strong>keepAlive – 心跳时间间隔-判断是否与服务器连接正常</strong></li></ol></li><li><p>MQTT服务端收到客户端连接请求后，会向客户端发送连接确认。同样的，该确认也是一个数据包。这个数据包官方名称为<strong>CONNACK</strong>。</p><ol><li><strong>returnCode – 连接返回码-如果客户端与服务端成功连接，则返回数字“0”。如果未能成功连接，连接返回码将会是一个非零的数值</strong></li><li><strong>sessionPresent – 当前会话-cleanSession设置为false时，如果服务端的确保存了没有收到客户端接收确认的报文信息，那么cleanSession为true，否则为false。其作用是客户端发送连接请求时，服务端告知客户端有没有保存报文信息。这个被服务端保存的报文信息是来自于上一次客户端连接时，服务端曾经发送此报文给客户端，但是发送后没有收到客户端接收确认。</strong></li></ol></li></ol><h6 id="发布、订阅和取消订阅" tabindex="-1"><a class="header-anchor" href="#发布、订阅和取消订阅"><span>发布、订阅和取消订阅</span></a></h6><ol><li><strong>PUBLISH – 发布消息，客户端连接到服务器后，便可发布消息，每个发布的消息必须包含一个主题</strong><ol><li><strong>topicName – 主题名</strong></li><li><strong>QoS – 服务质量等级，QoS有三个级别：0、1和2</strong></li><li><strong>packetId – 报文标识符--MQTT设备可以通过该标识符对MQTT报文进行甄别和管理。</strong></li><li><strong>retainFlag – 保留标志</strong></li><li><strong>Payload – 有效载荷—通过MQTT所发送的实际内容，文本，图像等格式</strong></li><li><strong>dupFlag – 重发标志</strong></li></ol></li><li><strong>SUBSCRIBE – 订阅主题—一个SUBSCRIBE报文可以用于订阅一个或者多个主题</strong></li><li><strong>SUBACK – 订阅确认—returnCode – 订阅返回码，客户端可通过一个SUBSCRIBE报文发送多个主题的订阅请求。服务端会针对SUBSCRIBE报文中的所有订阅主题来逐一回复给客户端一个返回码。</strong></li><li><strong>UNSUBSCRIBE – 取消订阅</strong></li></ol><h5 id="互联网基础知识" tabindex="-1"><a class="header-anchor" href="#互联网基础知识"><span>互联网基础知识</span></a></h5><p>互联网协议簇（Iternet Protocal Suite）是 全球互联网通用协议标准。</p><p>互联网协议包含了上百种标准，其中最重要的两个协议是TCP和IP协议。所以，大家把互联网的协议简称为TCP/IP协议。</p><p>互联网上每个计算机的唯一标识就是IP地址，如果一台计算机同时接入到两个或更多的网络，比如路由器，它就会有两个或多个IP地址，所以，IP地址对应的实际上是计算机的网络接口，通常是网卡。</p><p>IP协议负责把数据从一台计算机通过网络发送到另一台计算机。数据被分割成一小块一小块，然后通过IP包发送出去。由于互联网链路复杂，两台计算机之间经常有多条线路，因此，路由器就负责决定如何把一个IP包转发出去。IP包的特点是按块发送，途径多个路由，但不保证能到达，也不保证顺序到达。</p><p>TCP协议则是建立在IP协议之上的。TCP协议负责在两台计算机之间建立可靠连接，保证数据包按顺序到达。TCP协议会通过握手建立连接，然后，对每个IP包编号，确保对方按顺序收到，如果包丢掉了，就自动重发。</p><p>许多常用的更高级的协议都是建立在TCP协议基础上的，比如用于浏览器的HTTP协议、发送邮件的SMTP协议等。</p><p>一个TCP报文除了包含要传输的数据外，还包含源IP地址和目标IP地址，源端口和目标端口。</p><p>一个进程也可能同时与多个计算机建立链接，因此它会申请很多端口。</p><p>Socket是网络编程的一个抽象概念。通常我们用一个Socket表示“打开了一个网络链接”，而打开一个Socket需要知道目标计算机的IP地址和端口号，再指定协议类型即可。</p><p>主动发起连接的叫客户端，被动响应连接的叫服务器。</p><h6 id="tcp编程" tabindex="-1"><a class="header-anchor" href="#tcp编程"><span>TCP编程</span></a></h6><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">#客户端编程</span>
<span class="line"></span>
<span class="line"># 导入socket库:</span>
<span class="line">import socket</span>
<span class="line"></span>
<span class="line"># 创建一个socket:</span>
<span class="line"># 创建Socket时，AF_INET指定使用IPv4协议，如果要用更先进的IPv6，就指定为AF_INET6。SOCK_STREAM指定使用面向流的TCP协议，这样，一个Socket对象就创建成功，但是还没有建立连接。</span>
<span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span>
<span class="line"># 建立连接:</span>
<span class="line"># 80端口是Web服务的标准端口。其他服务都有对应的标准端口号，例如SMTP服务是25端口，FTP服务是21端口，等等。端口号小于1024的是Internet标准服务的端口，端口号大于1024的，可以任意使用</span>
<span class="line">s.connect((&#39;www.sina.com.cn&#39;, 80)) # 注意参数是一个tuple，包含地址和端口号。</span>
<span class="line"># 发送数据:</span>
<span class="line">s.send(b&#39;GET / HTTP/1.1\r\nHost: www.sina.com.cn\r\nConnection: close\r\n\r\n&#39;)</span>
<span class="line"># 接收数据:</span>
<span class="line">buffer = []</span>
<span class="line">while True:</span>
<span class="line">    # 每次最多接收1k字节:</span>
<span class="line">    d = s.recv(1024)</span>
<span class="line">    if d:</span>
<span class="line">        buffer.append(d)</span>
<span class="line">    else:</span>
<span class="line">        break</span>
<span class="line">data = b&#39;&#39;.join(buffer)</span>
<span class="line"># 关闭连接:</span>
<span class="line">s.close()</span>
<span class="line"></span>
<span class="line">header, html = data.split(b&#39;\r\n\r\n&#39;, 1)</span>
<span class="line">print(header.decode(&#39;utf-8&#39;))</span>
<span class="line"># 把接收的数据写入文件:</span>
<span class="line">with open(&#39;sina.html&#39;, &#39;wb&#39;) as f:</span>
<span class="line">    f.write(html)</span>
<span class="line"># 现在，只需要在浏览器中打开这个sina.html文件，就可以看到新浪的首页了。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"># 服务器编程</span>
<span class="line"></span>
<span class="line"># 导入socket库:</span>
<span class="line">import socket</span>
<span class="line"></span>
<span class="line"># 创建一个基于IPv4和TCP协议的Socket：</span>
<span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span>
<span class="line"># 监听端口:</span>
<span class="line">s.bind((&#39;127.0.0.1&#39;, 9999))</span>
<span class="line"># 调用listen()方法开始监听端口，传入的参数指定等待连接的最大数量：</span>
<span class="line">s.listen(5)</span>
<span class="line">print(&#39;Waiting for connection...&#39;)</span>
<span class="line"></span>
<span class="line"># 服务器程序通过一个永久循环来接受来自客户端的连接，accept()会等待并返回一个客户端的连接</span>
<span class="line">while True:</span>
<span class="line">    # 接受一个新连接:</span>
<span class="line">    sock, addr = s.accept()</span>
<span class="line">    # 创建新线程来处理TCP连接:</span>
<span class="line">    t = threading.Thread(target=tcplink, args=(sock, addr))</span>
<span class="line">    t.start()</span>
<span class="line"></span>
<span class="line"># 每个连接都必须创建新线程（或进程）来处理，否则，单线程在处理连接的过程中，无法接受其他客户端的连接</span>
<span class="line">def tcplink(sock, addr):</span>
<span class="line">    print(&#39;Accept new connection from %s:%s...&#39; % addr)</span>
<span class="line">    sock.send(b&#39;Welcome!&#39;)</span>
<span class="line">    while True:</span>
<span class="line">        data = sock.recv(1024)</span>
<span class="line">        time.sleep(1)</span>
<span class="line">        if not data or data.decode(&#39;utf-8&#39;) == &#39;exit&#39;:</span>
<span class="line">            break</span>
<span class="line">        sock.send((&#39;Hello, %s!&#39; % data.decode(&#39;utf-8&#39;)).encode(&#39;utf-8&#39;))</span>
<span class="line">    sock.close()</span>
<span class="line">    print(&#39;Connection from %s:%s closed.&#39; % addr)</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"># 用于测试服务器的客户端程序</span>
<span class="line">import socket</span>
<span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span>
<span class="line"># 建立连接:</span>
<span class="line">s.connect((&#39;127.0.0.1&#39;, 9999))</span>
<span class="line"># 接收欢迎消息:</span>
<span class="line">print(s.recv(1024).decode(&#39;utf-8&#39;))</span>
<span class="line">for data in [b&#39;Michael&#39;, b&#39;Tracy&#39;, b&#39;Sarah&#39;]:</span>
<span class="line">    # 发送数据:</span>
<span class="line">    s.send(data)</span>
<span class="line">    print(s.recv(1024).decode(&#39;utf-8&#39;))</span>
<span class="line">s.send(b&#39;exit&#39;)</span>
<span class="line">s.close()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="udp编程" tabindex="-1"><a class="header-anchor" href="#udp编程"><span>UDP编程</span></a></h6><p>TCP是建立可靠连接，并且通信双方都可以以流的形式发送数据。相对TCP，UDP则是面向无连接的协议。</p><p>使用UDP协议时，不需要建立连接，只需要知道对方的IP地址和端口号，就可以直接发数据包，能不能到达就不知道了。虽然用UDP传输数据不可靠，但它的优点是和TCP比，速度快，对于不要求可靠到达的数据，就可以使用UDP协议。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"># 服务器端编程</span>
<span class="line">import socket</span>
<span class="line"></span>
<span class="line"># UDP的通信双方也分为客户端和服务器。服务器首先需要绑定端口</span>
<span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span>
<span class="line"># 绑定端口:</span>
<span class="line">s.bind((&#39;127.0.0.1&#39;, 9999))</span>
<span class="line"></span>
<span class="line"># 创建Socket时，SOCK_DGRAM指定了这个Socket的类型是UDP。绑定端口和TCP一样，但是不需要调用listen()方法，而是直接接收来自任何客户端的数据</span>
<span class="line">print(&#39;Bind UDP on 9999...&#39;)</span>
<span class="line">while True:</span>
<span class="line">    # 接收数据:</span>
<span class="line">    data, addr = s.recvfrom(1024)</span>
<span class="line">    print(&#39;Received from %s:%s.&#39; % addr)</span>
<span class="line">    s.sendto(b&#39;Hello, %s!&#39; % data, addr)</span>
<span class="line"># recvfrom()方法返回数据和客户端的地址与端口，这样，服务器收到数据后，直接调用sendto()就可以把数据用UDP发给客户端。</span>
<span class="line"># 注意这里省掉了多线程，因为这个例子很简单。</span>
<span class="line"></span>
<span class="line"># 客户端编程</span>
<span class="line">import socket</span>
<span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span>
<span class="line">for data in [b&#39;Michael&#39;, b&#39;Tracy&#39;, b&#39;Sarah&#39;]:</span>
<span class="line">    # 发送数据:</span>
<span class="line">    s.sendto(data, (&#39;127.0.0.1&#39;, 9999))</span>
<span class="line">    # 接收数据:</span>
<span class="line">    print(s.recv(1024).decode(&#39;utf-8&#39;))</span>
<span class="line">s.close()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>单连接和多连接，个人理解为</p><p>多连接的情况下可以选择是否自动分配Link ID</p><p>数据模式和命令模式，数据模式用于透传</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-10-15T14:39:21.000Z" data-allow-mismatch>2025/10/15 14:39</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mlh18@qq.com">malihang</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/study-notes/assets/js/runtime~app.54772a73.js" defer></script><script src="/study-notes/assets/js/6036.7d799e3b.js" defer></script><script src="/study-notes/assets/js/app.459e885f.js" defer></script>
  </body>
</html>
