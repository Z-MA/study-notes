<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>LiZhou 学习笔记</title><meta name="description" content="LiZhou Study Notes">
    <link rel="stylesheet" href="/study-notes/assets/css/styles.eff80740.css">
    <link rel="preload" href="/study-notes/assets/js/runtime~app.b263a0aa.js" as="script"><link rel="preload" href="/study-notes/assets/css/styles.eff80740.css" as="style"><link rel="preload" href="/study-notes/assets/js/6036.7d799e3b.js" as="script"><link rel="preload" href="/study-notes/assets/js/app.8753df20.js" as="script">
    <link rel="prefetch" href="/study-notes/assets/js/Base_01_Math.html.c721fa92.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_03_永磁10讲.html.9be16e1b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_01_Base.html.098e310c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_020_weidongshan.html.59ce0b49.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ST.html.e4c2fe44.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Career.html.76fd4459.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_10_FOC.html.d494d49d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_021_Algorithms.html.17536f51.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Robot.html.20b6ebdd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Protocol.html.be74ffaf.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_011_FreeRTOS.html.2c4f7466.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Electronics.html.a6bb75a2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_013_Linux.html.256c81fa.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ESPRESSIF.html.f56f20f2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Car.html.1445925c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_PCB.html.1e521b7e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Tool.html.22f0a8d5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Circuit.html.29cff5f8.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_AI.html.bc600b38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_010_VersionControlSystem.html.aedcc3b1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_01_Design.html.72a9d9c7.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_004_Matlab.html.458205d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_00_Motor.html.13c6e4dd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_03_mechanics.html.6ae4e01e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_51.html.c5bc6ef9.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_02_CAX.html.e88788d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_IOT.html.2eccc1d6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_SLAM.html.93745467.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_04_TOOL.html.8b7b48c9.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Log.html.25f91089.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_11_TIMER.html.4eb05f50.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Video.html.c905d2ed.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Raspberry Pi.html.7fefb830.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_009_DevTool.html.1ad809b4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_012_RT-Thread.html.9991ddbe.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Audio.html.fad407ae.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_06_Electronics.html.3b938fe5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Storage.html.1fcdef3f.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_02_Physics.html.f88771d3.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_001_OS.html.ebd9a416.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_03_DDC.html.fdb945eb.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_ElectricalEnergy.html.5fe5928a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_001_C.html.45e15f26.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_TechnologyCollection.html.a0849c1c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Arduino.html.d0840f6e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_022_DesignMode.html.f7667801.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_IC.html.3a3ff3f5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Canaan.html.22ca4853.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/get-started.html.4895b3af.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Database.html.e3e355d4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_20_MC_FOC.html.3a828c2b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Board.html.dc51ff11.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_002_Python.html.d5a21fd2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_index.html.472a6d77.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Secure.html.de1ee739.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_020_ComputerSystem.html.094362f1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_other.html.ecd4d1d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_003_Rust.html.7d7d6d17.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Armarium.html.edcc7208.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/index.html.4a5d0a5a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Infineon.html.40e7fec6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_index.html.87ac7181.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_index.html.0995e034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Virtual.html.f7474034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_014_openharmory.html.8eed78cd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Consumption.html.caeeff5d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_OTA.html.3d12318a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_30_HW.html.25d871be.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_04_Control.html.05fa9682.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/404.html.b06b23c6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/study-notes/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="LiZhou 学习笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">LiZhou 学习笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://vuejs.press/zh/" aria-label="VuePress" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->VuePress<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://vuejs.press/zh/" aria-label="VuePress" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->VuePress<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Embeded <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Code <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/001_C.html" aria-label="C"><!--[--><!--[--><!--]--><!--]-->C<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/002_Python.html" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/003_Rust.html" aria-label="Rust"><!--[--><!--[--><!--]--><!--]-->Rust<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/004_Matlab.html" aria-label="Matlab"><!--[--><!--[--><!--]--><!--]-->Matlab<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/009_DevTool.html" aria-label="开发工具"><!--[--><!--[--><!--]--><!--]-->开发工具<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/010_VersionControlSystem.html" aria-label="版本管理"><!--[--><!--[--><!--]--><!--]-->版本管理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/020_ComputerSystem.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/021_Algorithms.html" aria-label="算法"><!--[--><!--[--><!--]--><!--]-->算法<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/022_DesignMode.html" aria-label="设计模式"><!--[--><!--[--><!--]--><!--]-->设计模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Motor <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/00_Motor.html" aria-label="电机教程"><!--[--><!--[--><!--]--><!--]-->电机教程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/01_Base.html" aria-label="电磁基础"><!--[--><!--[--><!--]--><!--]-->电磁基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/03_%E6%B0%B8%E7%A3%8110%E8%AE%B2.html" aria-label="永磁10讲"><!--[--><!--[--><!--]--><!--]-->永磁10讲<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/10_FOC.html" aria-label="FOC"><!--[--><!--[--><!--]--><!--]-->FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/11_TIMER.html" aria-label="定时器"><!--[--><!--[--><!--]--><!--]-->定时器<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/20_MC_FOC.html" aria-label="MC_FOC"><!--[--><!--[--><!--]--><!--]-->MC_FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/30_HW.html" aria-label="电机硬件"><!--[--><!--[--><!--]--><!--]-->电机硬件<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h3 id="不会吧-你还在赤裸裸的使用printf" tabindex="-1"><a class="header-anchor" href="#不会吧-你还在赤裸裸的使用printf"><span>不会吧，你还在赤裸裸的使用printf?</span></a></h3><p>哈喽，伙计们！</p><blockquote><p>最近做了一些Linux应用开发方面的东西，感觉现在有点混乱，所以想将每个知识点模块化，并且能够搭建自己的API库，方便以后能够直接使用！</p></blockquote><p>今天主要来讨论一下我们最常用的打印字符串，实现调试打印和颜色打印。</p><h2 id="_1、明确需求" tabindex="-1"><a class="header-anchor" href="#_1、明确需求"><span><strong>1、明确需求</strong></span></a></h2><p>在<code>Linux</code>开发环境下，我们日常使用的打印字符串的主要需求可能有两种：</p><ul><li><strong>多级别打印</strong>：我们调试打印信息可以分为多个级别，全局设置打印级别，来实现打印的全局管理！</li><li><strong>多颜色打印</strong>：不同的打印级别对应不同的打印色彩，方便快速吸引开发者的注意力，快速定位问题！</li></ul><p>基于以上两个基本需求，我们来进行简单封装。</p><h2 id="_2、打印级别分类" tabindex="-1"><a class="header-anchor" href="#_2、打印级别分类"><span><strong>2、打印级别分类</strong></span></a></h2><p>打印级别参考内核的分类，设置级别如下：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">typedefenum {</span>
<span class="line">  LOG_EMERG=0, /**&lt; Emergency */</span>
<span class="line">  LOG_ALERT,   /**&lt; Alert */</span>
<span class="line">  LOG_CRIT,    /**&lt; Critical */</span>
<span class="line">  LOG_ERR,     /**&lt; Error */</span>
<span class="line">  LOG_WARNING, /**&lt; Warning */</span>
<span class="line">  LOG_NOTICE,  /**&lt; Notice */</span>
<span class="line">  LOG_INFO,    /**&lt; Information */</span>
<span class="line">  LOG_DEBUG    /**&lt; Debug */</span>
<span class="line">}GLOBAL_LOG_LEVEL;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、打印级别控制" tabindex="-1"><a class="header-anchor" href="#_3、打印级别控制"><span><strong>3、打印级别控制</strong></span></a></h2><p>打印级别分类后，我们定义全局变量，来全局控制打印级别。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">GLOBAL_LOG_LEVEL g_log_level = LOG_INFO;        //  default log level</span>
<span class="line"></span>
<span class="line">/**</span>
<span class="line"> * @brief 设置LOG打印等级</span>
<span class="line"> *</span>
<span class="line"> * @param log_level</span>
<span class="line"> */</span>
<span class="line"></span>
<span class="line">voidSet_Log_Lever(GLOBAL_LOG_LEVEL log_level) {</span>
<span class="line"></span>
<span class="line">    g_log_level = log_level;</span>
<span class="line"></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要全局调整打印级别，我们可以调用<code>Set_Log_Lever</code>的接口，实现打印级别的适时调整。</p><h2 id="_4、打印信息添加" tabindex="-1"><a class="header-anchor" href="#_4、打印信息添加"><span><strong>4、打印信息添加</strong></span></a></h2><p>在输出我们正常打印信息之前，我们也需要添加一些时间信息，打印级别信息等。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">constchar global_log_level_string[8][10] = {&quot;EMERG&quot;, &quot;ALERT&quot;, &quot;CRIT&quot;, &quot;ERR&quot;, &quot;WARNING&quot;, &quot;NOTICE&quot;, &quot;INFO&quot;, &quot;DEBUG&quot;};</span>
<span class="line">staticchar str_tmp[512];</span>
<span class="line"></span>
<span class="line">	// 增加时间信息</span>
<span class="line">time_t now;</span>
<span class="line">    time(&amp;now);</span>
<span class="line">    strftime(str_tmp,sizeof(str_tmp), &quot;[%Y-%m-%d %H:%M:%S &quot;, localtime(&amp;now));</span>
<span class="line"></span>
<span class="line">    //加入LOG后缀信息</span>
<span class="line">    strcat(str_tmp,global_log_level_string[level]);</span>
<span class="line">    strcat(str_tmp, &quot;] &quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过以上代码，将<strong>时间和打印级别</strong>信息都添加到字符串之前。</p><p><strong>输出效果如下</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">[2022-10-2109:13:54 INFO] log info output</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5、颜色定义" tabindex="-1"><a class="header-anchor" href="#_5、颜色定义"><span><strong>5、颜色定义</strong></span></a></h2><blockquote><p>颜色控制如何做？</p></blockquote><p>很简单，在输出字符串前，符合特定的颜色控制格式，就可以更改打印颜色了。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">printf(&quot;\033[显示方式；字背景颜色;字体颜色m…\033[0m&quot;)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>控制命令以\033[开头，以m结尾，而中间则是属性码，属性代码之间使用;分隔，如\033[1;34;42m，最后以默认颜色\033[0m结尾，以避免影响后面正常打印！</p></blockquote><p><strong>显示方式</strong></p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>意义</strong></td><td><strong>显示方式</strong></td></tr><tr><td>默认</td><td>0</td></tr><tr><td>高亮显示</td><td>1</td></tr><tr><td>下划线</td><td>4</td></tr><tr><td>闪烁</td><td>5</td></tr><tr><td>反白显示</td><td>7</td></tr><tr><td>不可见</td><td>8</td></tr></tbody></table><p><strong>前景颜色和背景颜色</strong></p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><strong>颜色</strong></td><td><strong>前景色</strong></td><td><strong>背景色</strong></td></tr><tr><td>黑色</td><td>30</td><td>40</td></tr><tr><td>红色</td><td>31</td><td>41</td></tr><tr><td>绿色</td><td>32</td><td>42</td></tr><tr><td>黄色</td><td>33</td><td>43</td></tr><tr><td>蓝色</td><td>34</td><td>44</td></tr><tr><td>紫红色</td><td>35</td><td>45</td></tr><tr><td>青蓝色</td><td>36</td><td>46</td></tr><tr><td>白色</td><td>37</td><td>47</td></tr></tbody></table><blockquote><p>没有设置的话就是默认</p></blockquote><p><strong>颜色定义</strong></p><blockquote><p>下方定义一些常用颜色，方便打印调用。</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">\#define LOG_CLRSTR_NONE         &quot;\033[0m&quot;               // 默认显示</span>
<span class="line">\#define LOG_CLRSTR_RED          &quot;\033[0;42;31m&quot;         // 绿红色</span>
<span class="line">\#define LOG_CLRSTR_GREEN        &quot;\033[0;32m&quot;         	// 绿色</span>
<span class="line">\#define LOG_CLRSTR_BLUE         &quot;\033[0;32;34m&quot;         // 蓝色</span>
<span class="line">\#define LOG_CLRSTR_DARK_GRAY    &quot;\033[1;30m&quot;            // 灰色</span>
<span class="line">\#define LOG_CLRSTR_CYAN         &quot;\033[0;36m&quot;            // 青色</span>
<span class="line">\#define LOG_CLRSTR_PURPLE       &quot;\033[0;35m&quot;            // 紫色</span>
<span class="line">\#define LOG_CLRSTR_BROWN        &quot;\033[0;33m&quot;            // 棕色</span>
<span class="line">\#define LOG_CLRSTR_YELLOW       &quot;\033[5;42;33m&quot;         // 绿黄色</span>
<span class="line">\#define LOG_CLRSTR_WHITE        &quot;\033[1;37m&quot;            // 白色</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6、颜色控制" tabindex="-1"><a class="header-anchor" href="#_6、颜色控制"><span><strong>6、颜色控制</strong></span></a></h2><p>定义完各类颜色后，我们要做的就是对于不同级别的打印，选择不同的颜色！</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">//LOG类型判断,选择不同打印颜色</span>
<span class="line">switch (level)</span>
<span class="line">    {</span>
<span class="line">case LOG_EMERG:</span>
<span class="line">        log_color = LOG_CLRSTR_RED;</span>
<span class="line">break;</span>
<span class="line">case LOG_ALERT:</span>
<span class="line">        log_color = LOG_CLRSTR_BLUE;</span>
<span class="line">break;</span>
<span class="line">case LOG_CRIT:</span>
<span class="line">        log_color = LOG_CLRSTR_CYAN;</span>
<span class="line">break;</span>
<span class="line">case LOG_ERR:</span>
<span class="line">        log_color = LOG_CLRSTR_RED;</span>
<span class="line">break;</span>
<span class="line">case LOG_WARNING:</span>
<span class="line">        log_color = LOG_CLRSTR_PURPLE;</span>
<span class="line">break;</span>
<span class="line">case LOG_NOTICE:</span>
<span class="line">        log_color = LOG_CLRSTR_YELLOW;</span>
<span class="line">break;</span>
<span class="line">case LOG_INFO:</span>
<span class="line">        log_color = LOG_CLRSTR_DARK_GRAY;</span>
<span class="line">break;</span>
<span class="line">case LOG_DEBUG:</span>
<span class="line">        log_color = LOG_CLRSTR_BROWN;</span>
<span class="line">break;</span>
<span class="line">default:</span>
<span class="line">        log_color = LOG_CLRSTR_GREEN;</span>
<span class="line">break;</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7、颜色打印" tabindex="-1"><a class="header-anchor" href="#_7、颜色打印"><span><strong>7、颜色打印</strong></span></a></h2><p>在选择对应颜色之后，我们要做的就是将这些颜色信息，放到正常打印信息的前方。</p><blockquote><p>可以通过字符串拼接的函数实现。</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">//  重新设置标准输出</span>
<span class="line">    sprintf(str_uart, &quot;%s&quot;,log_color);</span>
<span class="line">    strcat(str_uart, str_tmp);</span>
<span class="line"></span>
<span class="line">	...</span>
<span class="line"></span>
<span class="line">    strcat(str_uart,LOG_CLRSTR_NONE);</span>
<span class="line">    strcat(str_uart, &quot;\r\n&quot;);</span>
<span class="line">    printf(&quot;%s&quot;,str_uart);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的颜色打印，说白了就是在我们要打印的字符串前方，加入打印颜色的信息即可，打印字符串结束之后，要加上<code>\033[0m</code>，来恢复默认！</p><h2 id="_8、打印预览" tabindex="-1"><a class="header-anchor" href="#_8、打印预览"><span><strong>8、打印预览</strong></span></a></h2><p>设置完成之后，我们看一下打印预览：</p><p><a href="https://mmbiz.qpic.cn/mmbiz_png/JqvCQ8UmFgX5go54ia1QWHXLYoHpalrYTV2YaicSPfT99N5MPVubMIPDSSShXavkibDGiaMY55e0tqEH1nXR2SvKjA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer"><img src="https://mmbiz.qpic.cn/mmbiz_png/JqvCQ8UmFgX5go54ia1QWHXLYoHpalrYTV2YaicSPfT99N5MPVubMIPDSSShXavkibDGiaMY55e0tqEH1nXR2SvKjA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></a></p><h2 id="_9、demo获取" tabindex="-1"><a class="header-anchor" href="#_9、demo获取"><span><strong>9、Demo获取</strong></span></a></h2><p>多级别彩色打印这个功能，已经封装成了一个<code>API</code>，我们直接获取源码，将<code>.c</code>和<code>.h</code>文件加入到自己工程即可使用！</p><p><strong>来源：嵌入式艺术</strong></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-10-15T14:39:21.000Z" data-allow-mismatch>2025/10/15 14:39</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mlh18@qq.com">malihang</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/study-notes/assets/js/runtime~app.b263a0aa.js" defer></script><script src="/study-notes/assets/js/6036.7d799e3b.js" defer></script><script src="/study-notes/assets/js/app.8753df20.js" defer></script>
  </body>
</html>
