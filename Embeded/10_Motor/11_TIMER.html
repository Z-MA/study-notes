<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>定时器 | LiZhou 学习笔记</title><meta name="description" content="这是一个C语言基础页面">
    <link rel="stylesheet" href="/study-notes/assets/css/styles.eff80740.css">
    <link rel="preload" href="/study-notes/assets/js/runtime~app.f0efdb6e.js" as="script"><link rel="preload" href="/study-notes/assets/css/styles.eff80740.css" as="style"><link rel="preload" href="/study-notes/assets/js/6036.7d799e3b.js" as="script"><link rel="preload" href="/study-notes/assets/js/app.c05956ee.js" as="script">
    <link rel="prefetch" href="/study-notes/assets/js/Base_01_Math.html.c721fa92.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_03_永磁10讲.html.0f463a9b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_01_Base.html.d4e3bf14.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_020_weidongshan.html.59ce0b49.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ST.html.e4c2fe44.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Career.html.76fd4459.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_10_FOC.html.e993af54.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_021_Algorithms.html.0eab52ca.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Robot.html.20b6ebdd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Protocol.html.be74ffaf.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_011_FreeRTOS.html.2c4f7466.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Electronics.html.a6bb75a2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_013_Linux.html.256c81fa.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_ESPRESSIF.html.f56f20f2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Car.html.1445925c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_PCB.html.1e521b7e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Tool.html.bc99efb6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_Circuit.html.29cff5f8.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_AI.html.bc600b38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_010_VersionControlSystem.html.aedcc3b1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_01_Design.html.718a1783.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_004_Matlab.html.458205d1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_00_Motor.html.13c6e4dd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_03_mechanics.html.6ae4e01e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_51.html.c5bc6ef9.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_02_CAX.html.1927dfe1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_IOT.html.2eccc1d6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_SLAM.html.93745467.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Log.html.25f91089.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_11_TIMER.html.4eb05f50.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_04_TOOL.html.c052c425.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Video.html.c905d2ed.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Raspberry Pi.html.7fefb830.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_009_DevTool.html.1ad809b4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_012_RT-Thread.html.9991ddbe.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Audio.html.fad407ae.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_06_Electronics.html.3b938fe5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Storage.html.1fcdef3f.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_001_OS.html.ebd9a416.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_02_Physics.html.e5bbda38.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_03_DDC.html.fdb945eb.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_ElectricalEnergy.html.5fe5928a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_TechnologyCollection.html.a0849c1c.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Arduino.html.d0840f6e.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_001_C.html.b591a2d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_05_Hardware_IC.html.3a3ff3f5.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Canaan.html.22ca4853.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_022_DesignMode.html.6a297ee4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/get-started.html.4895b3af.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Database.html.e3e355d4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_20_MC_FOC.html.3a828c2b.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Board.html.dc51ff11.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_002_Python.html.d5a21fd2.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_index.html.472a6d77.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Secure.html.de1ee739.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_020_ComputerSystem.html.094362f1.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_other.html.ecd4d1d0.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_01_Code_003_Rust.html.7d7d6d17.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/index.html.dc8bcb04.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Armarium.html.edcc7208.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_03_SOC_Infineon.html.40e7fec6.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_index.html.87ac7181.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Design_index.html.0995e034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_Virtual.html.f7474034.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_02_System_014_openharmory.html.8eed78cd.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_06_Field_Consumption.html.caeeff5d.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_04_Driver_OTA.html.3d12318a.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Embeded_10_Motor_30_HW.html.25d871be.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/Base_04_Control.html.05fa9682.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/404.html.b06b23c6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/study-notes/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="LiZhou 学习笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">LiZhou 学习笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.github.com/Z-MA" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.Gitee.com/Z-MA" aria-label="Gitee" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Gitee<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Embeded <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Code <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/001_C.html" aria-label="视觉设计"><!--[--><!--[--><!--]--><!--]-->视觉设计<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/002_Python.html" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/003_Rust.html" aria-label="Rust"><!--[--><!--[--><!--]--><!--]-->Rust<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/004_Matlab.html" aria-label="Matlab"><!--[--><!--[--><!--]--><!--]-->Matlab<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/009_DevTool.html" aria-label="开发工具"><!--[--><!--[--><!--]--><!--]-->开发工具<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/010_VersionControlSystem.html" aria-label="版本管理"><!--[--><!--[--><!--]--><!--]-->版本管理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/020_ComputerSystem.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/021_Algorithms.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/01_Code/022_DesignMode.html" aria-label="计算机系统"><!--[--><!--[--><!--]--><!--]-->计算机系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Motor <span class="down arrow"></span></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/00_Motor.html" aria-label="电机教程"><!--[--><!--[--><!--]--><!--]-->电机教程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/01_Base.html" aria-label="电磁基础"><!--[--><!--[--><!--]--><!--]-->电磁基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/03_%E6%B0%B8%E7%A3%8110%E8%AE%B2.html" aria-label="永磁10讲"><!--[--><!--[--><!--]--><!--]-->永磁10讲<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/10_FOC.html" aria-label="FOC"><!--[--><!--[--><!--]--><!--]-->FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/study-notes/Embeded/10_Motor/11_TIMER.html" aria-label="定时器"><!--[--><!--[--><!--]--><!--]-->定时器<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/20_MC_FOC.html" aria-label="MC_FOC"><!--[--><!--[--><!--]--><!--]-->MC_FOC<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study-notes/Embeded/10_Motor/30_HW.html" aria-label="电机硬件"><!--[--><!--[--><!--]--><!--]-->电机硬件<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="f1xx定时器" tabindex="-1"><a class="header-anchor" href="#f1xx定时器"><span>F1xx定时器</span></a></h1><h2 id="f1定时器定时器通道映射" tabindex="-1"><a class="header-anchor" href="#f1定时器定时器通道映射"><span>F1定时器定时器通道映射</span></a></h2><p><img src="/study-notes/assets/img/6cb189ef79e260e284af8b812d135f9ba30d782e.ed2d55fc.png" alt=""></p><h1 id="基本定时器" tabindex="-1"><a class="header-anchor" href="#基本定时器"><span>基本定时器</span></a></h1><h2 id="基础定时器简介" tabindex="-1"><a class="header-anchor" href="#基础定时器简介"><span>基础定时器简介</span></a></h2><h2 id="基础定时器框图" tabindex="-1"><a class="header-anchor" href="#基础定时器框图"><span>基础定时器框图</span></a></h2><h3 id="_0-总框图" tabindex="-1"><a class="header-anchor" href="#_0-总框图"><span>0.总框图</span></a></h3><p><img src="/study-notes/assets/img/基础定时器框图.582abab8.png" alt="image-20250222213201301"></p><h3 id="_1-时钟源" tabindex="-1"><a class="header-anchor" href="#_1-时钟源"><span>1.时钟源</span></a></h3><h3 id="_2-控制器" tabindex="-1"><a class="header-anchor" href="#_2-控制器"><span>2.控制器</span></a></h3><h3 id="_3-计数器" tabindex="-1"><a class="header-anchor" href="#_3-计数器"><span>3.计数器</span></a></h3><h2 id="基础定时器寄存器" tabindex="-1"><a class="header-anchor" href="#基础定时器寄存器"><span>基础定时器寄存器</span></a></h2><p><img src="/study-notes/assets/img/基础定时器寄存器.ea3a9f5d.png" alt="image-20250222214036519"></p><h5 id="控制寄存器-timx-cr1" tabindex="-1"><a class="header-anchor" href="#控制寄存器-timx-cr1"><span>控制寄存器 - TIMx_CR1</span></a></h5><p><strong>ARPE</strong>：自动重装载预装载使能 (Auto-reload preload enable) 位6:4</p><p>0：TIMx_ARR寄存器没有缓冲</p><p>1：TIMx_ARR寄存器具有缓冲</p><p><strong>OPM</strong>：单脉冲模式 (One-pulse mode)</p><p>0：在发生更新事件时，计数器不停止</p><p>1：在发生下次更新事件时，计数器停止计数(清除CEN位)。</p><p><strong>URS</strong>：更新请求源 (Update request source) 该位由软件设置和清除，以选择UEV事件的请求源。</p><p>0：如果使能了中断或DMA，以下任一事件可以产生一个更新中断或DMA请求： - 计数器上溢或下溢 - 设置UG位 - 通过从模式控制器产生的更新</p><p>1：如果使能了中断或DMA，只有计数器上溢或下溢可以产生更新中断或DMA请求。</p><p><strong>UDIS</strong>：禁止更新 (Update disable)</p><p>该位由软件设置和清除，以使能或禁止UEV事件的产生。</p><p>0：UEV使能。更新事件(UEV)可以由下列事件产生： - 计数器上溢或下溢 - 设置UG位 - 通过从模式控制器产生的更新 产生更新事件后，带缓冲的寄存器被加载为预加载数值。</p><p>1：禁止UEV。不产生更新事件(UEV)，影子寄存器保持它的内容(ARR、PSC)。但是如果设置 了UG位或从模式控制器产生了一个硬件复位，则计数器和预分频器将被重新初始化。</p><p><strong>CEN</strong>：计数器使能 (Counter enable)</p><p>0：关闭计数器</p><p>1：使能计数器</p><p>注：门控模式只能在软件已经设置了CEN位时有效，而触发模式可以自动地由硬件设置CEN 位。 在单脉冲模式下，当产生更新事件时CEN被自动清除。</p><h5 id="控制寄存器2-timx-cr2" tabindex="-1"><a class="header-anchor" href="#控制寄存器2-timx-cr2"><span>控制寄存器2 - TIMx_CR2</span></a></h5><p><strong>MMS</strong>：主模式选择 (Master mode selection)</p><p>这些位用于选择在主模式下向从定时器发送的同步信息(TRGO)，有以下几种组合：</p><p>000：复位 – 使用TIMx_EGR寄存器的UG位作为触发输出(TRGO)。如果触发输入产生了复位 (从模式控制器配置为复位模式)，则相对于实际的复位信号，TRGO上的信号有一定的延迟。</p><p>001：使能 – 计数器使能信号CNT_EN被用作为触发输出(TRGO)。它可用于在同一时刻启动多 个定时器，或控制使能从定时器的时机。计数器使能信号是通过CEN控制位和配置为门控模式 时的触发输入的’逻辑或’产生。 当计数器使能信号是通过触发输入控制时，在TRGO输出上会有一些延迟，除非选择了主/从模 式(见TIMx_SMCR寄存器的MSM位)。</p><p>010：更新 – 更新事件被用作为触发输出(TRGO)。例如一个主定时器可以作为从定时器的预分 频器使用。</p><h5 id="dma-中断使能寄存器-timx-dier" tabindex="-1"><a class="header-anchor" href="#dma-中断使能寄存器-timx-dier"><span>DMA/中断使能寄存器 - TIMx_DIER</span></a></h5><p><strong>UDE</strong>：更新DMA请求使能 (Update DMA request enable)</p><p>0：禁止更新DMA请求 1：使能更新DMA请求</p><p><strong>UIE</strong>：更新中断使能 (Update interrupt enable)</p><p>0：禁止更新中断 1：使能更新中断</p><h5 id="状态寄存器-timx-sr" tabindex="-1"><a class="header-anchor" href="#状态寄存器-timx-sr"><span>状态寄存器 - TIMx_SR</span></a></h5><p><strong>UIF</strong>：更新中断标志 (Update interrupt flag)</p><p>硬件在更新中断时设置该位，它由软件清除。</p><p>0：没有产生更新。</p><p>1：产生了更新中断。下述情况下由硬件设置该位：</p><ul><li>计数器产生上溢或下溢并且TIMx_CR1中的UDIS=0；</li><li>如果TIMx_CR1中的URS=0并且UDIS=0，当使用TIMx_EGR寄存器的UG位重新初始化计数器CNT时。</li></ul><h5 id="事件产生寄存器-timx-egr" tabindex="-1"><a class="header-anchor" href="#事件产生寄存器-timx-egr"><span>事件产生寄存器 - TIMx_EGR</span></a></h5><p><strong>UG</strong>：产生更新事件 (Update generation)</p><p>该位由软件设置，由硬件自动清除。</p><p>0：无作用</p><p>1：重新初始化定时器的计数器并产生对寄存器的更新。注意：预分频器也被清除(但预分频系数不变)。</p><h5 id="计数器-timx-cnt" tabindex="-1"><a class="header-anchor" href="#计数器-timx-cnt"><span>计数器 - TIMx_CNT</span></a></h5><p><strong>CNT</strong>：计数器数值</p><h5 id="预分频器-timx-psc" tabindex="-1"><a class="header-anchor" href="#预分频器-timx-psc"><span>预分频器 - TIMx_PSC</span></a></h5><p><strong>PSC[15:0]</strong>：预分频器数值 (Prescaler value)</p><p>计数器的时钟频率CK_CNT等于fCK_PSC/(PSC[15:0]+1)。在每一次更新事件时，PSC的数值被传送到实际的预分频寄存器中。</p><h5 id="自动重装载寄存器-timx-arr" tabindex="-1"><a class="header-anchor" href="#自动重装载寄存器-timx-arr"><span>自动重装载寄存器 - TIMx_ARR</span></a></h5><p><strong>ARR[15:0]</strong>：自动重装载数值 (Prescaler value)</p><p>ARR的数值将传送到实际的自动重装载寄存器中。如果自动重装载数值为0，则计数器停止。</p><h1 id="通用定时器" tabindex="-1"><a class="header-anchor" href="#通用定时器"><span>通用定时器</span></a></h1><h2 id="通用定时器简介" tabindex="-1"><a class="header-anchor" href="#通用定时器简介"><span>通用定时器简介</span></a></h2><h2 id="通用定时器框图" tabindex="-1"><a class="header-anchor" href="#通用定时器框图"><span>通用定时器框图</span></a></h2><p><img src="/study-notes/assets/img/image-20250223214312332.574c0973.png" alt="image-20250223214312332"></p><h2 id="通用定时器寄存器" tabindex="-1"><a class="header-anchor" href="#通用定时器寄存器"><span>通用定时器寄存器</span></a></h2><p><img src="/study-notes/assets/img/通用定时器框图.0b098181.png" alt="通用定时器框图"></p><h1 id="高级定时器" tabindex="-1"><a class="header-anchor" href="#高级定时器"><span>高级定时器</span></a></h1><h2 id="高级定时器简介" tabindex="-1"><a class="header-anchor" href="#高级定时器简介"><span>高级定时器简介</span></a></h2><h2 id="高级定时器框图" tabindex="-1"><a class="header-anchor" href="#高级定时器框图"><span>高级定时器框图</span></a></h2><h3 id="_0-总框图-1" tabindex="-1"><a class="header-anchor" href="#_0-总框图-1"><span>0.总框图</span></a></h3><p><img src="/study-notes/assets/img/高级定时器框图.47674e92.png" alt="image-20250222230209995"></p><h3 id="_1-时钟源-1" tabindex="-1"><a class="header-anchor" href="#_1-时钟源-1"><span>1.时钟源</span></a></h3><p>时钟来源有4种：内部时钟源（CK_INT）、外部时钟源TINx（x=1,2,3,4）、外部时钟源ETR、内部触发输入ITR</p><h4 id="外部时钟源tinx" tabindex="-1"><a class="header-anchor" href="#外部时钟源tinx"><span>外部时钟源TINx</span></a></h4><p>4个通道：TI1/2/3/4（TIMx_CH1/2/3/4）。</p><p>2个触发源：滤波后的定时器输入1 （TI1FP1）和滤波后的定时器输入2（TI2FP2）</p><p><img src="/study-notes/assets/img/image-20250222232421628.169e09ed.png" alt="image-20250222232421628"></p><h4 id="外部时钟源etr" tabindex="-1"><a class="header-anchor" href="#外部时钟源etr"><span>外部时钟源ETR</span></a></h4><p>1个通道：ETR（TIMx_ETR）</p><p>1个触发源：ETRP，滤波后连接至ETRF</p><p><img src="/study-notes/assets/img/image-20250222232726964.727172d5.png" alt="image-20250222232726964"></p><h4 id="内部输入触发itr" tabindex="-1"><a class="header-anchor" href="#内部输入触发itr"><span>内部输入触发ITR</span></a></h4><p><img src="/study-notes/assets/img/image-20250223211052829.d712583d.png" alt="image-20250223211052829"></p><h3 id="_2-控制器-1" tabindex="-1"><a class="header-anchor" href="#_2-控制器-1"><span>2.控制器</span></a></h3><p>触发控制器：针对片内外设输出触发信号，比如为其他定时器提供时钟和触发DAC/ADC转换。</p><p>从模式控制器：可以控制计数器复位、启动、递增/递减、计数。</p><p>编码器接口：针对编码器计数而设计。</p><h3 id="_3-时基单元" tabindex="-1"><a class="header-anchor" href="#_3-时基单元"><span>3.时基单元</span></a></h3><p>1个16位自动装载计数器</p><p>1个 16 位向上、向下、向上/向下计数器</p><p>1个16位可编程（可以实时修改）预分频器</p><p>1个16位计数器</p><p>1个16位重复次数寄存器，高级定时器专属，重复计数器是自动加载的 ，当向上溢出、向下溢出和中央 对其模式下每次上溢或下溢时，重复计数器的值递减。高级控制定时器只能在重复次数达到0的 时候产生更新事件。</p><h3 id="_4-5-输入捕获-输出比较" tabindex="-1"><a class="header-anchor" href="#_4-5-输入捕获-输出比较"><span>4/5.输入捕获/输出比较</span></a></h3><p><img src="/study-notes/assets/img/image-20250223141011548.48603fde.png" alt="image-20250223141011548"></p><p><img src="/study-notes/assets/img/image-20250223144518942.564dc7ab.png" alt="image-20250223144518942"></p><p><img src="/study-notes/assets/img/image-20250223144541346.affbd947.png" alt="image-20250223144541346"></p><p><img src="/study-notes/assets/img/image-20250223144614150.5fa4fa54.png" alt="image-20250223144614150"></p><p>输入捕获模式、PWM输入模式、编码器接口模式。</p><p>强制输出模式、输出比较模式、PWM模式、互补输出和死区插入、单脉冲模式、断路功能</p><h3 id="_6-断路功能" tabindex="-1"><a class="header-anchor" href="#_6-断路功能"><span>6.断路功能</span></a></h3><p>断路功能就是电机的刹车功能。刹车源可以说是外部断路输入引脚，也可以是一个时钟失败事件（由复位时钟控制器的时钟安全系统产生）。</p><h2 id="高级定时器寄存器" tabindex="-1"><a class="header-anchor" href="#高级定时器寄存器"><span>高级定时器寄存器</span></a></h2><p><img src="/study-notes/assets/img/高级定时器寄存器.6d14f68a.png" alt="image-20250222233854900"></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-10-15T14:39:21.000Z" data-allow-mismatch>2025/10/15 14:39</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mlh18@qq.com">malihang</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: mlh18@qq.com">PC-20250430KOXD\Administrator</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/study-notes/Embeded/10_Motor/10_FOC.html" aria-label="FOC"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">FOC</span></div><!--]--></a><a class="route-link auto-link next" href="/study-notes/Embeded/10_Motor/20_MC_FOC.html" aria-label="MC_FOC"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">MC_FOC</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/study-notes/assets/js/runtime~app.f0efdb6e.js" defer></script><script src="/study-notes/assets/js/6036.7d799e3b.js" defer></script><script src="/study-notes/assets/js/app.c05956ee.js" defer></script>
  </body>
</html>
